<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUCATION DEPARTMENT SCREENING TEST PREPARATION – May 26, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 10vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }

        .option-button:hover:not(.selected) {
            background-color: #f0f0f0;
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
            }
            .top-bar .whatsapp-link {
                order: 1; /* Move whatsapp to top on mobile */
                font-size: 0.8rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault(); // Disable Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J
            }
            if (e.key === 'F12') {
                e.preventDefault(); // Disable F12
            }
        });
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste
    </script>

    <div class="top-bar">
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
        <div class="date-display" id="liveDate"></div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            KP Teacher Corps | PREPARED BY: SYED ASGHAR ALI SHAH | Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "May 30, 2025"; // MANDATORY DAILY INPUT
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('liveDate').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `EDUCATION DEPARTMENT SCREENING TEST PREPARATION – ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        const quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40;
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date().toDateString();
            if (question.special && CURRENT_DATE.toDateString() === today) {
                quizCard.classList.add('special-question');
            }

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                button.dataset.optionIndex = index;
                button.onclick = () => selectOption(index);

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === index) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionIndex - The index of the selected option.
         */
        function selectOption(selectedOptionIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('selected', 'correct', 'incorrect'); // Clear previous states

                if (index === selectedOptionIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.isCorrect) {
                    correctCount++;
                } else if (answer && answer.selectedOptionIndex !== undefined) {
                    incorrectCount++;
                }
            });

            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount} / ${userAnswers.length}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount} / ${userAnswers.length}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpojgab', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            if (id === 'etea' && password === '30may') {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Pedagogy (10 MCQs from Pages 13-16)
            const pedagogyMCQs = [
                { question: "Which of the following is a characteristic of a good test?", options: ["Reliability", "Validity", "Usability", "All of these"], correctOptionIndex: 3, explanation: "A good test should be reliable, valid, and usable (Page 13)." },
                { question: "The consistency of a test score is known as its:", options: ["Validity", "Objectivity", "Reliability", "Usability"], correctOptionIndex: 2, explanation: "Reliability refers to the consistency of test results (Page 13)." },
                { question: "Which type of validity refers to how well a test measures what it intends to measure?", options: ["Content validity", "Criterion validity", "Construct validity", "Face validity"], correctOptionIndex: 2, explanation: "Construct validity ensures the test measures the intended theoretical construct (Page 14)." },
                { question: "A test is considered objective if:", options: ["It is easy to administer.", "It yields the same results regardless of who scores it.", "It measures what it is supposed to measure.", "It is relevant to the curriculum."], correctOptionIndex: 1, explanation: "Objectivity means the scoring is not influenced by the scorer (Page 14)." },
                { question: "Which of the following is a type of non-verbal communication?", options: ["Speaking", "Writing", "Body language", "Listening"], correctOptionIndex: 2, explanation: "Body language is a form of non-verbal communication (Page 15)." },
                { question: "The process of giving feedback to students about their learning is called:", options: ["Assessment", "Evaluation", "Instruction", "Remediation"], correctOptionIndex: 0, explanation: "Assessment involves gathering information about student learning to provide feedback (Page 15)." },
                { question: "Which type of assessment is conducted at the end of a course to evaluate overall learning?", options: ["Formative assessment", "Summative assessment", "Diagnostic assessment", "Placement assessment"], correctOptionIndex: 1, explanation: "Summative assessment evaluates learning at the end of an instructional unit (Page 16)." },
                { question: "A teacher uses a pre-test to identify students' prior knowledge. This is an example of:", options: ["Formative assessment", "Summative assessment", "Diagnostic assessment", "Placement assessment"], correctOptionIndex: 2, explanation: "Diagnostic assessment identifies strengths and weaknesses before instruction (Page 16)." },
                { question: "Which of the following is a characteristic of formative assessment?", options: ["It is high-stakes.", "It provides ongoing feedback for improvement.", "It is conducted only once.", "It is used for grading."], correctOptionIndex: 1, explanation: "Formative assessment is continuous and aims to improve learning during instruction (Page 16)." },
                { question: "The purpose of evaluation in education is to:", options: ["Assign grades only.", "Judge the worth or value of something.", "Identify learning disabilities.", "Compare students with each other."], correctOptionIndex: 1, explanation: "Evaluation makes judgments about the value or effectiveness of educational processes (Page 16)." }
            ];
            quizQuestions.push(...pedagogyMCQs);

            // General Science (25 MCQs from Pages 135-152)
            const generalScienceMCQs = [
                { question: "What is the unit of electric current?", options: ["Volt", "Ohm", "Ampere", "Watt"], correctOptionIndex: 2, explanation: "Ampere (A) is the SI unit of electric current (Page 135)." },
                { question: "Which of the following is a renewable energy source?", options: ["Natural gas", "Petroleum", "Biomass", "Coal"], correctOptionIndex: 2, explanation: "Biomass energy is derived from organic matter and is renewable (Page 136)." },
                { question: "What is the process of converting light energy into electrical energy using solar cells?", options: ["Photosynthesis", "Electrolysis", "Photovoltaic effect", "Fusion"], correctOptionIndex: 2, explanation: "The photovoltaic effect is the basis of solar cell operation (Page 137)." },
                { question: "Which of these is a non-renewable energy source formed from the remains of ancient marine organisms?", options: ["Wind energy", "Solar energy", "Crude oil", "Geothermal energy"], correctOptionIndex: 2, explanation: "Crude oil (petroleum) is a fossil fuel formed over millions of years (Page 138)." },
                { question: "What is the main cause of global warming?", options: ["Volcanic eruptions", "Deforestation", "Increased greenhouse gas emissions", "Ocean currents"], correctOptionIndex: 2, explanation: "Increased greenhouse gas emissions, primarily from human activities, lead to global warming (Page 139)." },
                { question: "Which gas is primarily responsible for the greenhouse effect?", options: ["Oxygen", "Nitrogen", "Carbon dioxide", "Hydrogen"], correctOptionIndex: 2, explanation: "Carbon dioxide is the most significant greenhouse gas (Page 140)." },
                { question: "What is the thinning of the ozone layer primarily caused by?", options: ["Carbon dioxide", "Methane", "Chlorofluorocarbons (CFCs)", "Water vapor"], correctOptionIndex: 2, explanation: "CFCs are known to deplete the ozone layer (Page 141)." },
                { question: "Acid rain is caused by the emission of sulfur dioxide and what other gas?", options: ["Oxygen", "Nitrogen oxides", "Carbon monoxide", "Methane"], correctOptionIndex: 1, explanation: "Sulfur dioxide and nitrogen oxides react with water to form acid rain (Page 142)." },
                { question: "Which of the following is a way to conserve water?", options: ["Leaving taps running", "Taking long showers", "Fixing leaky faucets", "Watering lawns during midday"], correctOptionIndex: 2, explanation: "Fixing leaks prevents water wastage (Page 143)." },
                { question: "What is the process of treating wastewater to remove pollutants before it is discharged?", options: ["Desalination", "Filtration", "Water purification", "Sewage treatment"], correctOptionIndex: 3, explanation: "Sewage treatment facilities purify wastewater (Page 144)." },
                { question: "Which of the following materials is biodegradable?", options: ["Plastic bottle", "Glass jar", "Newspaper", "Aluminum can"], correctOptionIndex: 2, explanation: "Newspaper can decompose naturally (Page 145)." },
                { question: "What does the 'reduce' principle in 'Reduce, Reuse, Recycle' refer to?", options: ["Reducing waste by buying less", "Reducing the size of waste", "Reducing pollution", "Reducing energy consumption"], correctOptionIndex: 0, explanation: "Reduce means minimizing the amount of waste generated (Page 146)." },
                { question: "Which of these is a natural disaster caused by sudden shaking of the Earth's crust?", options: ["Flood", "Drought", "Earthquake", "Tsunami"], correctOptionIndex: 2, explanation: "Earthquakes are caused by tectonic plate movements (Page 147)." },
                { question: "What is a large wave caused by an underwater earthquake or volcanic eruption?", options: ["Hurricane", "Tornado", "Tsunami", "Cyclone"], correctOptionIndex: 2, explanation: "Tsunamis are powerful ocean waves often triggered by undersea quakes (Page 148)." },
                { question: "Which of the following is a measure to prepare for a flood?", options: ["Building houses in low-lying areas", "Ignoring weather warnings", "Having an emergency kit ready", "Blocking drainage systems"], correctOptionIndex: 2, explanation: "An emergency kit is crucial for disaster preparedness (Page 149)." },
                { question: "What is the process by which a seed grows into a new plant?", options: ["Pollination", "Fertilization", "Germination", "Photosynthesis"], correctOptionIndex: 2, explanation: "Germination is the process of a seed sprouting (Page 150)." },
                { question: "Which part of a plant is responsible for reproduction?", options: ["Roots", "Stem", "Leaves", "Flower"], correctOptionIndex: 3, explanation: "Flowers contain the reproductive organs of a plant (Page 151)." },
                { question: "What is the transfer of pollen from the anther to the stigma of a flower?", options: ["Fertilization", "Germination", "Pollination", "Photosynthesis"], correctOptionIndex: 2, explanation: "Pollination is essential for plant reproduction (Page 152)." },
                { question: "Which of the following is a common household appliance that uses electricity?", options: ["Chair", "Table", "Refrigerator", "Book"], correctOptionIndex: 2, explanation: "A refrigerator uses electricity to cool food (Page 135)." },
                { question: "What is the primary energy conversion in a hydroelectric power plant?", options: ["Chemical to electrical", "Thermal to electrical", "Kinetic to electrical", "Solar to electrical"], correctOptionIndex: 2, explanation: "Hydroelectric plants convert the kinetic energy of water into electrical energy (Page 137)." },
                { question: "Which of the following is a fossil fuel?", options: ["Wood", "Solar", "Natural Gas", "Wind"], correctOptionIndex: 2, explanation: "Natural gas is a fossil fuel formed from ancient organic matter (Page 138)." },
                { question: "What is the effect of global warming on sea levels?", options: ["Decrease", "No change", "Increase", "Fluctuation"], correctOptionIndex: 2, explanation: "Global warming leads to melting glaciers and thermal expansion of water, causing sea levels to rise (Page 139)." },
                { question: "Which environmental problem is characterized by the destruction of forests?", options: ["Desertification", "Deforestation", "Pollution", "Soil erosion"], correctOptionIndex: 1, explanation: "Deforestation is the clearing of forests for other land uses (Page 140)." },
                { question: "What is the purpose of recycling?", options: ["To bury waste", "To burn waste", "To process used materials into new products", "To throw away waste"], correctOptionIndex: 2, explanation: "Recycling converts waste materials into new items (Page 146)." },
                { question: "Which natural disaster is a rotating column of air extending from a thunderstorm to the ground?", options: ["Hurricane", "Tornado", "Blizzard", "Dust storm"], correctOptionIndex: 1, explanation: "A tornado is a violent rotating column of air (Page 147)." }
            ];
            quizQuestions.push(...generalScienceMCQs);

            // Social Studies (15 MCQs from Pages 489-506)
            const socialStudiesMCQs = [
                { question: "Which of the following is a major challenge to education in Pakistan?", options: ["High enrollment rates", "Lack of qualified teachers", "Abundant funding", "Excellent infrastructure"], correctOptionIndex: 1, explanation: "Lack of qualified teachers is a significant barrier to quality education (Page 489)." },
                { question: "What is the primary goal of sustainable development?", options: ["Rapid industrialization at any cost", "Meeting the needs of the present without compromising the ability of future generations to meet their own needs", "Exploiting all natural resources", "Prioritizing economic growth over environmental protection"], correctOptionIndex: 1, explanation: "Sustainable development balances current needs with future generations' needs (Page 490)." },
                { question: "Which of the following is a major source of freshwater pollution in Pakistan?", options: ["Rainfall", "Industrial waste", "Underground springs", "Glaciers"], correctOptionIndex: 1, explanation: "Industrial waste discharge is a significant contributor to water pollution (Page 491)." },
                { question: "What is the term for the movement of people from rural areas to urban areas?", options: ["Emigration", "Immigration", "Urbanization", "Migration"], correctOptionIndex: 2, explanation: "Urbanization is the increase in urban populations (Page 492)." },
                { question: "Which of the following is a positive impact of tourism on a country's economy?", options: ["Increased pollution", "Loss of cultural identity", "Job creation and revenue generation", "Increased traffic congestion"], correctOptionIndex: 2, explanation: "Tourism creates jobs and brings foreign exchange (Page 493)." },
                { question: "What is the purpose of a census?", options: ["To count animals", "To measure economic growth", "To count the population and gather demographic data", "To survey land area"], correctOptionIndex: 2, explanation: "A census collects data about a population (Page 494)." },
                { question: "Which of the following is a traditional art form of Pakistan involving intricate patterns and vibrant colors?", options: ["Origami", "Calligraphy", "Sculpture", "Abstract painting"], correctOptionIndex: 1, explanation: "Islamic calligraphy is a prominent art form in Pakistan (Page 495)." },
                { question: "What is the name of the traditional Pakistani folk music genre often accompanied by a harmonium and tabla?", options: ["Pop", "Rock", "Qawwali", "Jazz"], correctOptionIndex: 2, explanation: "Qawwali is a devotional form of Sufi music (Page 496)." },
                { question: "Which of the following is a major cash crop of Pakistan?", options: ["Tea", "Coffee", "Cotton", "Rubber"], correctOptionIndex: 2, explanation: "Cotton is a vital cash crop for Pakistan (Page 497)." },
                { question: "What is the term for the cultivation of crops and raising of livestock?", options: ["Industry", "Services", "Agriculture", "Mining"], correctOptionIndex: 2, explanation: "Agriculture encompasses farming and animal husbandry (Page 498)." },
                { question: "Which of the following is an important mineral resource found in Pakistan?", options: ["Gold", "Diamonds", "Coal", "Platinum"], correctOptionIndex: 2, explanation: "Coal is a significant mineral resource in Pakistan (Page 499)." },
                { question: "What is the process of extracting valuable minerals or other geological materials from the Earth?", options: ["Farming", "Manufacturing", "Mining", "Fishing"], correctOptionIndex: 2, explanation: "Mining is the extraction of minerals (Page 500)." },
                { question: "Which of the following is a major industry in Pakistan?", options: ["Automobile manufacturing", "Textile industry", "Aerospace engineering", "Pharmaceutical research"], correctOptionIndex: 1, explanation: "The textile industry is a cornerstone of Pakistan's economy (Page 501)." },
                { question: "What is the process of converting raw materials into finished goods?", options: ["Agriculture", "Trade", "Manufacturing", "Services"], correctOptionIndex: 2, explanation: "Manufacturing transforms raw materials into products (Page 502)." },
                { question: "Which of the following is a major challenge to industrial development in Pakistan?", options: ["Abundant skilled labor", "Stable energy supply", "Lack of infrastructure", "Access to global markets"], correctOptionIndex: 2, explanation: "Inadequate infrastructure hinders industrial growth (Page 503)." }
            ];
            quizQuestions.push(...socialStudiesMCQs);

            // English (25 MCQs from Pages 815-822)
            const englishMCQs = [
                { question: "Which of the following is a type of sentence that makes a statement?", options: ["Interrogative", "Imperative", "Declarative", "Exclamatory"], correctOptionIndex: 2, explanation: "A declarative sentence states a fact or opinion (Page 815)." },
                { question: "What is the purpose of an imperative sentence?", options: ["To ask a question", "To express strong emotion", "To give a command or make a request", "To make a statement"], correctOptionIndex: 2, explanation: "Imperative sentences issue commands or requests (Page 815)." },
                { question: "Which punctuation mark is used at the end of an exclamatory sentence?", options: [".", "?", "!", ","], correctOptionIndex: 2, explanation: "An exclamation mark ends an exclamatory sentence (Page 815)." },
                { question: "What is the subject in the sentence: \"The tall tree swayed in the wind.\"", options: ["Tall", "Tree", "Swayed", "Wind"], correctOptionIndex: 1, explanation: "The subject is the noun or pronoun performing the action or being described (Page 816)." },
                { question: "Identify the predicate in the sentence: \"The children *played in the park*.\"", options: ["The children", "Played", "In the park", "Played in the park"], correctOptionIndex: 3, explanation: "The predicate includes the verb and all words that complete its meaning (Page 816)." },
                { question: "Which of the following is a simple predicate?", options: ["Ran quickly", "Is sleeping", "Will have been studying", "Sings"], correctOptionIndex: 3, explanation: "A simple predicate is just the verb itself (Page 816)." },
                { question: "What is a compound subject?", options: ["A subject with multiple adjectives.", "Two or more subjects joined by a conjunction.", "A subject that is also a verb.", "A single subject with a long description."], correctOptionIndex: 1, explanation: "A compound subject consists of two or more subjects sharing the same verb (Page 817)." },
                { question: "Which of these sentences contains a compound predicate?", options: ["He ate and slept.", "She is happy.", "They went to the market.", "The dog barked loudly."], correctOptionIndex: 0, explanation: "A compound predicate has two or more verbs sharing the same subject (Page 817)." },
                { question: "What is a direct object?", options: ["A noun that modifies a verb.", "A noun that receives the action of a transitive verb.", "A noun that describes the subject.", "A noun that acts as a subject complement."], correctOptionIndex: 1, explanation: "A direct object directly receives the action of the verb (Page 818)." },
                { question: "Identify the direct object in the sentence: \"She baked a cake.\"", options: ["She", "Baked", "A", "Cake"], correctOptionIndex: 3, explanation: "'Cake' is the object that was baked (Page 818)." },
                { question: "What is an indirect object?", options: ["The main object of the sentence.", "The object that receives the direct object.", "A noun that describes the verb.", "A noun that acts as a subject."], correctOptionIndex: 1, explanation: "An indirect object tells to whom or for whom the action of the verb is done (Page 818)." },
                { question: "In the sentence, \"He gave *her* a gift,\" what is the indirect object?", options: ["He", "Gave", "Her", "Gift"], correctOptionIndex: 2, explanation: "'Her' is the recipient of the gift (Page 818)." },
                { question: "Which of the following is a subject complement?", options: ["A noun that modifies a verb.", "A noun or adjective that follows a linking verb and renames or describes the subject.", "A noun that receives the action of the verb.", "A noun that acts as an adverb."], correctOptionIndex: 1, explanation: "Subject complements provide more information about the subject after a linking verb (Page 819)." },
                { question: "In the sentence, \"She is a *teacher*,\" what is 'teacher'?", options: ["Direct object", "Indirect object", "Subject complement", "Adverb"], correctOptionIndex: 2, explanation: "'Teacher' renames the subject 'She' after the linking verb 'is' (Page 819)." },
                { question: "What is an object complement?", options: ["A noun or adjective that renames or describes the direct object.", "A noun that modifies the subject.", "A noun that acts as a verb.", "A noun that is the direct object."], correctOptionIndex: 0, explanation: "An object complement provides more information about the direct object (Page 820)." },
                { question: "In the sentence, \"They named their dog *Buddy*,\" what is 'Buddy'?", options: ["Direct object", "Indirect object", "Subject complement", "Object complement"], correctOptionIndex: 3, explanation: "'Buddy' renames the direct object 'dog' (Page 820)." },
                { question: "Which of the following is a phrase?", options: ["She sings.", "Running quickly", "He is happy.", "They went to the market."], correctOptionIndex: 1, explanation: "A phrase is a group of words without both a subject and a predicate (Page 821)." },
                { question: "What is the main characteristic of a clause?", options: ["It has no verb.", "It has no subject.", "It contains both a subject and a predicate.", "It always expresses a complete thought."], correctOptionIndex: 2, explanation: "A clause is a group of words with a subject and a verb (Page 821)." },
                { question: "Which of these is an independent clause?", options: ["Because he was tired", "When she arrived", "The sun shines brightly", "If you study hard"], correctOptionIndex: 2, explanation: "An independent clause can stand alone as a complete sentence (Page 821)." },
                { question: "What is a dependent clause?", options: ["A clause that expresses a complete thought.", "A clause that can stand alone as a sentence.", "A clause that cannot stand alone as a complete sentence.", "A clause that always begins with a coordinating conjunction."], correctOptionIndex: 2, explanation: "A dependent clause relies on an independent clause to make sense (Page 822)." },
                { question: "Which of the following words introduces a dependent clause?", options: ["And", "But", "Because", "Or"], correctOptionIndex: 2, explanation: "Subordinating conjunctions like 'because' introduce dependent clauses (Page 822)." },
                { question: "Which of the following is a sentence fragment?", options: ["He ran fast.", "The dog barked loudly.", "Running in the park.", "She smiled."], correctOptionIndex: 2, explanation: "A sentence fragment is an incomplete sentence (Page 815)." },
                { question: "What is the difference between a phrase and a clause?", options: ["A phrase has a subject and verb, a clause does not.", "A clause has a subject and verb, a phrase does not.", "They are the same.", "A phrase is always longer than a clause."], correctOptionIndex: 1, explanation: "A clause has a subject and verb, while a phrase does not (Page 821)." },
                { question: "Which type of sentence is formed by joining two independent clauses with a coordinating conjunction?", options: ["Simple sentence", "Complex sentence", "Compound sentence", "Compound-complex sentence"], correctOptionIndex: 2, explanation: "A compound sentence consists of two or more independent clauses (Page 817)." },
                { question: "In the sentence \"The cat, *which was black*, slept on the mat,\" what is \"which was black\"?", options: ["Independent clause", "Dependent clause", "Phrase", "Simple predicate"], correctOptionIndex: 1, explanation: "This is a dependent clause that modifies 'cat' (Page 822)." }
            ];
            quizQuestions.push(...englishMCQs);

            // Mathematics (25 MCQs from Pages 968-974)
            const mathematicsMCQs = [
                { question: "What is the value of $2x + 5$ if $x = 3$?", options: ["7", "10", "11", "13"], correctOptionIndex: 2, explanation: "$2(3) + 5 = 6 + 5 = 11$ (Page 968)." },
                { question: "Solve for y: $y - 4 = 9$", options: ["5", "13", "14", "15"], correctOptionIndex: 1, explanation: "$y = 9 + 4 = 13$ (Page 968)." },
                { question: "What is the product of $3x$ and $4y$?", options: ["$7xy$", "$12xy$", "$12x+y$", "$xy$"], correctOptionIndex: 1, explanation: "$3x \\times 4y = 12xy$ (Page 969)." },
                { question: "If $a = 5$ and $b = 2$, what is the value of $a^2 - b^2$?", options: ["3", "7", "21", "29"], correctOptionIndex: 2, explanation: "$5^2 - 2^2 = 25 - 4 = 21$ (Page 969)." },
                { question: "What is the perimeter of a regular hexagon with a side length of 7 cm?", options: ["21 cm", "35 cm", "42 cm", "49 cm"], correctOptionIndex: 2, explanation: "A hexagon has 6 sides, so perimeter = $6 \\times 7 = 42$ cm (Page 970)." },
                { question: "What is the area of a parallelogram with a base of 12 cm and a height of 5 cm?", options: ["17 cm²", "34 cm²", "60 cm²", "120 cm²"], correctOptionIndex: 2, explanation: "Area of parallelogram = base × height = $12 \\times 5 = 60$ cm² (Page 971)." },
                { question: "What is the volume of a rectangular prism with length 6 cm, width 3 cm, and height 2 cm?", options: ["11 cm³", "18 cm³", "36 cm³", "72 cm³"], correctOptionIndex: 2, explanation: "Volume = length × width × height = $6 \\times 3 \\times 2 = 36$ cm³ (Page 972)." },
                { question: "Which of the following is a unit of temperature?", options: ["Meter", "Liter", "Celsius", "Kilogram"], correctOptionIndex: 2, explanation: "Celsius is a unit of temperature (Page 973)." },
                { question: "How many hours are in 3 days?", options: ["24", "48", "72", "96"], correctOptionIndex: 2, explanation: "1 day = 24 hours, so 3 days = $3 \\times 24 = 72$ hours (Page 974)." },
                { question: "What is the next number in the sequence: 1, 3, 5, 7, __?", options: ["8", "9", "10", "11"], correctOptionIndex: 1, explanation: "This is a sequence of odd numbers (Page 968)." },
                { question: "What is the value of $10 - (2 \\times 3)$?", options: ["4", "6", "8", "12"], correctOptionIndex: 0, explanation: "Follow order of operations (PEMDAS/BODMAS): $2 \\times 3 = 6$, then $10 - 6 = 4$ (Page 968)." },
                { question: "If a shirt costs $30 and there is a 15% sales tax, what is the total cost?", options: ["$4.50", "$25.50", "$34.50", "$45.00"], correctOptionIndex: 2, explanation: "15% of $30 is $4.50. Total cost = $30 + $4.50 = $34.50 (Page 964)." },
                { question: "What is the circumference of a circle with a diameter of 20 cm? (Use $\\pi = 3.14$)", options: ["31.4 cm", "62.8 cm", "125.6 cm", "314 cm"], correctOptionIndex: 1, explanation: "Circumference = $\\pi d = 3.14 \\times 20 = 62.8$ cm (Page 965)." },
                { question: "What is the area of a trapezoid with parallel sides of 6 cm and 10 cm, and a height of 4 cm?", options: ["16 cm²", "32 cm²", "64 cm²", "160 cm²"], correctOptionIndex: 1, explanation: "Area of trapezoid = $1/2 \\times (sum of parallel sides) \\times height = 1/2 \\times (6+10) \\times 4 = 1/2 \\times 16 \\times 4 = 32$ cm² (Page 971)." },
                { question: "Which of these is a composite number?", options: ["7", "11", "13", "15"], correctOptionIndex: 3, explanation: "A composite number has more than two factors. 15 has factors 1, 3, 5, 15 (Page 961)." },
                { question: "What is the square root of 144?", options: ["10", "12", "14", "16"], correctOptionIndex: 1, explanation: "The square root of 144 is 12, because $12 \\times 12 = 144$ (Page 961)." },
                { question: "What is the value of $5^3$?", options: ["15", "25", "75", "125"], correctOptionIndex: 3, explanation: "$5^3 = 5 \\times 5 \\times 5 = 125$ (Page 961)." },
                { question: "If the temperature is 25 degrees Celsius, what is it in Fahrenheit? (Formula: $F = C \\times 9/5 + 32$)", options: ["77°F", "45°F", "57°F", "68°F"], correctOptionIndex: 0, explanation: "$25 \\times 9/5 + 32 = 45 + 32 = 77°F$ (Page 973)." },
                { question: "How many milliliters are in 1 liter?", options: ["10", "100", "1000", "10000"], correctOptionIndex: 2, explanation: "1 liter (L) is equal to 1000 milliliters (mL) (Page 972)." },
                { question: "What is the average speed if a car travels 200 km in 4 hours?", options: ["40 km/h", "50 km/h", "60 km/h", "80 km/h"], correctOptionIndex: 1, explanation: "Average speed = Total distance / Total time = 200 km / 4 hours = 50 km/h (Page 964)." },
                { question: "What is the value of $3x - 1$ if $x = 5$?", options: ["12", "14", "16", "18"], correctOptionIndex: 1, explanation: "$3(5) - 1 = 15 - 1 = 14$ (Page 968)." },
                { question: "What is the sum of the angles in a quadrilateral?", options: ["90°", "180°", "270°", "360°"], correctOptionIndex: 3, explanation: "The sum of interior angles of a quadrilateral is 360 degrees (Page 970)." },
                { question: "Which of the following is a unit of length?", options: ["Kilogram", "Liter", "Meter", "Hour"], correctOptionIndex: 2, explanation: "Meter is a standard unit of length (Page 957)." },
                { question: "What is the probability of rolling an even number on a standard six-sided die?", options: ["1/6", "1/3", "1/2", "2/3"], correctOptionIndex: 2, explanation: "Even numbers are 2, 4, 6 (3 outcomes). Total outcomes are 6. Probability = 3/6 = 1/2 (Page 967)." },
                { question: "What is the value of $4^2 - 2^2$?", options: ["2", "4", "12", "16"], correctOptionIndex: 2, explanation: "$4^2 = 16$, $2^2 = 4$. $16 - 4 = 12$ (Page 969)." }
            ];
            quizQuestions.push(...mathematicsMCQs);

            // Randomly select one special question
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Initialize the quiz when the script loads
        initializeQuiz();
    </script>
</body>
</html>

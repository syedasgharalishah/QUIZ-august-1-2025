<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 7 Quiz - EDUCATION DEPARTMENT SCREENING TEST PREPARATION â€“ June 25, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Full viewport height */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489); /* Teal to Mint Green */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        /* Card Styling (for login, quiz, results pages) */
        .card {
            background-color: #FFF5EE; /* PeachPuff - very light, warm tone */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff - light and attractive */
            color: #2C3E50; /* Dark text for contrast */
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd; /* Light border */
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }

        .option-button:hover:not(.selected) {
            background-color: #f0f0f0; /* Slightly darker on hover */
        }

        .option-button.selected {
            border-color: #6D6875; /* Medium gray for selected */
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745; /* Darker green border */
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Light Red */
            border-color: #dc3545; /* Darker red border */
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Styling */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); /* Glowing effect */
        }

        /* Explanation Section Styling */
        .explanation {
            background-color: #e0f7fa; /* Light Cyan */
            border-left: 5px solid #20B2AA; /* Teal border */
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Timer and Progress Display */
        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Animations */
        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.01); }
            100% { transform: scale(1); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
            }
            .top-bar .whatsapp-link {
                order: 1; /* Move whatsapp to top on mobile */
                font-size: 0.8rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <script>
        // Disable right-click, specific keyboard shortcuts (Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J, F12), copy, and paste
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') {
                e.preventDefault();
            }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <a href="https://chat.whatsapp.com/H3uhXoDodPmAOaVvi3PcZq" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
        <div class="date-display" id="liveDate"></div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            KP Teacher Corps | PREPARED BY: SYED ASGHAR ALI SHAH | Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <!-- All page sections are initially hidden to prevent flicker -->
        <div id="loginPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
            </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / <span id="maxScore"></span></p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "June 25, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('liveDate').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `Day 7 Quiz - EDUCATION DEPARTMENT SCREENING TEST PREPARATION â€“ ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        const quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40; // Default quiz duration
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} â€“ ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date().toDateString();
            if (question.special && CURRENT_DATE.toDateString() === today) {
                quizCard.classList.add('special-question');
            }

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.innerHTML = option; // Use innerHTML to render LaTeX
                button.dataset.optionIndex = index;
                button.onclick = () => selectOption(index);

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === index) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Render math equations using MathJax if available
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([document.getElementById('questionText'), optionsContainer]);
            }


            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([explanationDiv]);
            }
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionIndex - The index of the selected option.
         */
        function selectOption(selectedOptionIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('selected', 'correct', 'incorrect'); // Clear previous states

                if (index === selectedOptionIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
             // Render math equations in explanation
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([document.getElementById('explanationDiv')]);
            }
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let totalAttempted = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    totalAttempted++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            const maxPossibleScore = quizQuestions.length * 2; // 2 points per question
            const score = (correctCount * 2) - incorrectCount; // Score calculation: 2 for correct, -1 for incorrect

            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('maxScore').textContent = maxPossibleScore;
            document.getElementById('resultCorrect').textContent = `${correctCount} / ${totalAttempted}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount} / ${totalAttempted}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', "day7"); // Specific ID for Day 7 quiz

            fetch('https://formspree.io/f/xwpojgab', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            // Specific credentials for Day 7
            if (id === 'day7' && password === '7777') {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            // Clear login fields and go back to login page
            document.getElementById('loginId').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('candidateName').value = '';
            showPage('loginPage');
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Pedagogy (10 MCQs from Pages 25-28)
            const pedagogyMCQs = [
                { question: "What is the purpose of 'educational psychology'?", options: ["To study abnormal behavior in students.", "To understand how students learn and develop, and to apply psychological principles to improve teaching.", "To classify students into groups.", "To design school buildings."], correctOptionIndex: 1, explanation: "Educational psychology helps educators create effective learning environments (Page 25)." },
                { question: "Who is known for the theory of 'cognitive development'?", options: ["B.F. Skinner", "Sigmund Freud", "Jean Piaget", "Ivan Pavlov"], correctOptionIndex: 2, explanation: "Jean Piaget's stages of cognitive development describe how children construct knowledge (Page 26)." },
                { question: "What is 'Vygotsky's Zone of Proximal Development (ZPD)'?", options: ["The area where a child cannot learn independently.", "The difference between what a learner can do without help and what they can achieve with guidance and support from a more knowledgeable other.", "A fixed set of skills a child possesses.", "The limit of a child's intelligence."], correctOptionIndex: 1, explanation: "ZPD emphasizes the importance of social interaction in learning (Page 26)." },
                { question: "What is 'Erik Erikson's theory' known for?", options: ["Cognitive stages", "Moral development", "Psychosocial stages of development", "Behavioral conditioning"], correctOptionIndex: 2, explanation: "Erik Erikson's theory describes personality development across the lifespan through a series of psychosocial crises (Page 27)." },
                { question: "What is 'motivation' in the context of learning?", options: ["The act of teaching.", "The process that initiates, guides, and maintains goal-oriented behaviors.", "The process of assessment.", "The study of human behavior."], correctOptionIndex: 1, explanation: "Motivation drives learners to achieve their goals (Page 27)." },
                { question: "Which type of motivation comes from within an individual?", options: ["Extrinsic motivation", "Intrinsic motivation", "External motivation", "Reward-based motivation"], correctOptionIndex: 1, explanation: "Intrinsic motivation is driven by internal rewards, such as enjoyment or satisfaction (Page 27)." },
                { question: "Which type of motivation comes from outside an individual, such as rewards or praise?", options: ["Intrinsic motivation", "Autonomy", "Extrinsic motivation", "Mastery"], correctOptionIndex: 2, explanation: "Extrinsic motivation involves external factors like grades, praise, or punishment (Page 27)." },
                { question: "What is 'memory' in educational psychology?", options: ["The ability to forget information.", "The capacity to encode, store, retain, and retrieve information.", "The process of problem-solving.", "The ability to learn new things."], correctOptionIndex: 1, explanation: "Memory is crucial for learning and knowledge retention (Page 28)." },
                { question: "What is 'short-term memory'?", options: ["Memory that lasts a lifetime.", "Memory that holds a small amount of information for a short period (around 20-30 seconds) without rehearsal.", "Memory for skills and habits.", "Memory for facts and events."], correctOptionIndex: 1, explanation: "Short-term memory is temporary and has limited capacity (Page 28)." },
                { question: "What is 'long-term memory'?", options: ["Memory that is easily forgotten.", "Memory that holds information for extended periods, from days to decades.", "Memory for immediate tasks.", "Memory that is only active during sleep."], correctOptionIndex: 1, explanation: "Long-term memory has a vast capacity and relatively permanent duration (Page 28)." }
            ];
            quizQuestions.push(...pedagogyMCQs);

            // General Science (15 MCQs from Pages 189-206)
            const generalScienceMCQs = [
                { question: "What is the function of the 'root system' in plants?", options: ["Photosynthesis", "Anchoring the plant and absorbing water and nutrients", "Producing flowers", "Transpiration"], correctOptionIndex: 1, explanation: "Roots are essential for plant stability and nutrient uptake (Page 189)." },
                { question: "What are the tiny structures in plant cells that contain chlorophyll and are the sites of photosynthesis?", options: ["Mitochondria", "Vacuoles", "Chloroplasts", "Nucleus"], correctOptionIndex: 2, explanation: "Chloroplasts are specialized organelles unique to plant cells (Page 190)." },
                { question: "Which part of the plant is responsible for transporting water and minerals from the roots to the leaves?", options: ["Phloem", "Stomata", "Xylem", "Pistil"], correctOptionIndex: 2, explanation: "Xylem forms a vascular network throughout the plant (Page 191)." },
                { question: "Which part of the plant is responsible for transporting sugars (food) produced during photosynthesis from the leaves to other parts of the plant?", options: ["Xylem", "Stomata", "Phloem", "Root hair"], correctOptionIndex: 2, explanation: "Phloem moves nutrients to where they are needed for growth and storage (Page 192)." },
                { question: "What is 'transpiration'?", options: ["Absorption of water by roots.", "The process of water movement through a plant and its evaporation from aerial parts, such as leaves, stems and flowers.", "Food production in leaves.", "Root growth."], correctOptionIndex: 1, explanation: "Transpiration is like a plant's sweating, crucial for water circulation (Page 193)." },
                { question: "What is 'pollination'?", options: ["Seed dispersal.", "The transfer of pollen from the anther to the stigma of a flower.", "Fruit formation.", "Plant respiration."], correctOptionIndex: 1, explanation: "Pollination is a key step in plant reproduction, often aided by wind, water, or animals (Page 194)." },
                { question: "Which type of reproduction involves only one parent and produces offspring genetically identical to the parent?", options: ["Sexual reproduction", "Asexual reproduction", "Cross-pollination", "Fertilization"], correctOptionIndex: 1, explanation: "Asexual reproduction methods include budding, fragmentation, and vegetative propagation (Page 195)." },
                { question: "What is 'fertilization' in plants?", options: ["Pollen transfer.", "The fusion of male gametes with female gametes to form a zygote.", "Seed germination.", "Fruit ripening."], correctOptionIndex: 1, explanation: "Fertilization leads to the development of the embryo within the seed (Page 196)." },
                { question: "What are 'seeds'?", options: ["Plant leaves.", "Reproductive units of flowering plants, typically containing an embryo and stored food, enclosed within a protective outer covering.", "Plant roots.", "Plant stems."], correctOptionIndex: 1, explanation: "Seeds are crucial for the dispersal and survival of plant species (Page 197)." },
                { question: "What is 'germination'?", options: ["Flower production.", "The process by which an organism grows from a seed or spore.", "Fruit development.", "Leaf shedding."], correctOptionIndex: 1, explanation: "Germination requires specific conditions like water, warmth, and oxygen (Page 198)." },
                { question: "What are 'vertebrates'?", options: ["Animals without backbones.", "Animals with a backbone or spinal column.", "Animals that live in water.", "Animals that lay eggs."], correctOptionIndex: 1, explanation: "Vertebrates include fish, amphibians, reptiles, birds, and mammals (Page 199)." },
                { question: "Which of the following is an example of an 'invertebrate'?", options: ["Fish", "Bird", "Spider", "Dog"], correctOptionIndex: 2, explanation: "Invertebrates are diverse and make up the vast majority of animal species (Page 200)." },
                { question: "What are 'mammals'?", options: ["Animals that lay eggs and have scales.", "Warm-blooded vertebrates that have hair or fur, and in females, mammary glands that produce milk to feed their young.", "Cold-blooded animals.", "Animals that live only in water."], correctOptionIndex: 1, explanation: "Mammals are characterized by their hair/fur and milk production (Page 201)." },
                { question: "Which class of vertebrates lays eggs, has feathers, and is warm-blooded?", options: ["Fish", "Reptiles", "Amphibians", "Birds"], correctOptionIndex: 3, explanation: "Birds are unique among vertebrates for their feathers and ability to fly (Page 202)." },
                { question: "What are 'amphibians'?", options: ["Animals that live only on land.", "Cold-blooded vertebrates that live both on land and in water, typically undergoing metamorphosis from an aquatic larval stage to a terrestrial adult form.", "Animals with scales.", "Animals with gills throughout their life."], correctOptionIndex: 1, explanation: "Amphibians include frogs, toads, and salamanders (Page 203)." }
            ];
            quizQuestions.push(...generalScienceMCQs);

            // Social Studies (10 MCQs from Pages 543-560 - Geography: Population & Migration)
            const socialStudiesMCQs = [
                { question: "What is the 'push factor' in migration?", options: ["Attractive job opportunities", "Better education facilities", "Poverty and lack of safety", "Cultural similarities"], correctOptionIndex: 2, explanation: "Push factors are negative conditions that compel people to leave their homes (Page 543)." },
                { question: "Which of these is a 'pull factor' for migration?", options: ["War and conflict", "High crime rates", "Better healthcare and social services", "Natural disasters"], correctOptionIndex: 2, explanation: "Pull factors are positive attractions that draw migrants to a new place (Page 544)." },
                { question: "What is 'internal migration'?", options: ["Movement between countries.", "Movement of people within a country's borders.", "Movement of people between continents.", "Temporary movement for tourism."], correctOptionIndex: 1, explanation: "Internal migration involves changing residence within the same country (Page 545)." },
                { question: "What is 'international migration'?", options: ["Movement between cities within a country.", "Movement across national borders.", "Daily commute for work.", "Seasonal movement for farming."], correctOptionIndex: 1, explanation: "International migration involves crossing political boundaries of countries (Page 546)." },
                { question: "What does 'emigration' refer to?", options: ["Entering a new country.", "Leaving one's own country to settle permanently in another.", "Temporary travel abroad.", "Returning to one's home country."], correctOptionIndex: 1, explanation: "Emigration is the act of exiting a country (Page 547)." },
                { question: "What does 'immigration' refer to?", options: ["Leaving one's own country.", "Coming to live permanently in a foreign country.", "Traveling for a short vacation.", "Moving to a different city in the same country."], correctOptionIndex: 1, explanation: "Immigration is the act of entering a new country (Page 548)." },
                { question: "What is 'urban growth'?", options: ["Decrease in rural population.", "The increase in the area and population of cities.", "Development of new agricultural lands.", "Conservation of natural resources."], correctOptionIndex: 1, explanation: "Urban growth is a global phenomenon driven by migration and natural increase (Page 549)." },
                { question: "Which of the following is a challenge associated with rapid urban growth?", options: ["Increased agricultural output.", "Improved public transport.", "Strain on infrastructure and services like housing, sanitation, and water supply.", "Reduced pollution."], correctOptionIndex: 2, explanation: "Rapid urbanization often outpaces infrastructure development, leading to problems (Page 550)." },
                { question: "What is a 'slum'?", options: ["A well-planned residential area.", "A squalid and overcrowded urban area inhabited by very poor people.", "A historical city center.", "A business district."], correctOptionIndex: 1, explanation: "Slums are characterized by poor living conditions and lack of basic services (Page 551)." },
                { question: "What is 'sustainable development'?", options: ["Development that meets the needs of the present without compromising the ability of future generations to meet their own needs.", "Rapid economic growth at any cost.", "Development focused only on technological advancements.", "Development that ignores environmental impacts."], correctOptionIndex: 0, explanation: "Sustainable development balances economic, social, and environmental considerations (Page 552)." }
            ];
            quizQuestions.push(...socialStudiesMCQs);

            // English (10 MCQs from Pages 839-846 - Direct & Indirect Narration)
            const englishMCQs = [
                { question: "Convert to Indirect Speech: 'He said, \"I am going to the market.\"'", options: ["He said that I was going to the market.", "He said that he is going to the market.", "He said that he was going to the market.", "He said that he had gone to the market."], correctOptionIndex: 2, explanation: "In Indirect Speech, present continuous becomes past continuous, and the pronoun changes from 'I' to 'he' (Page 839)." },
                { question: "Convert to Indirect Speech: 'She said, \"I finished my work.\"'", options: ["She said that she finished her work.", "She said that she has finished her work.", "She said that she had finished her work.", "She said that I finished my work."], correctOptionIndex: 2, explanation: "Past simple in Direct Speech becomes past perfect in Indirect Speech (Page 840)." },
                { question: "Convert to Indirect Speech: 'They said, \"We will go to the party.\"'", options: ["They said that we would go to the party.", "They said that they will go to the party.", "They said that they would go to the party.", "They said that they had gone to the party."], correctOptionIndex: 2, explanation: "'Will' changes to 'would' and 'we' changes to 'they' (Page 841)." },
                { question: "Convert to Direct Speech: 'He asked me if I was hungry.'", options: ["He asked me, \"Are you hungry?\"", "He said, \"Am I hungry?\"", "He asked, \"Was I hungry?\"", "He said, \"You are hungry.\""], correctOptionIndex: 0, explanation: "Indirect question with 'if' usually comes from a 'Yes/No' question in Direct Speech (Page 842)." },
                { question: "Convert to Indirect Speech: 'The teacher said, \"The Earth revolves around the Sun.\"'", options: ["The teacher said that the Earth revolved around the Sun.", "The teacher said that the Earth revolves around the Sun.", "The teacher said that the Earth will revolve around the Sun.", "The teacher said the Earth had revolved around the Sun."], correctOptionIndex: 1, explanation: "Universal truths do not change tense in Indirect Speech (Page 843)." },
                { question: "Convert to Indirect Speech: 'He said to me, \"Please help me.\"'", options: ["He told me to help him.", "He requested me to help him.", "He asked me if I would help him.", "He ordered me to help him."], correctOptionIndex: 1, explanation: "Commands and requests often use 'to' + infinitive in Indirect Speech, with verbs like 'requested', 'ordered', 'advised' (Page 844)." },
                { question: "Convert to Direct Speech: 'She ordered me to open the door.'", options: ["She said, \"Open the door.\"", "She said, \"Please open the door.\"", "She asked, \"Did you open the door?\"", "She ordered, \"I will open the door.\""], correctOptionIndex: 0, explanation: "An order in Indirect Speech comes from an imperative sentence in Direct Speech (Page 845)." },
                { question: "Convert to Indirect Speech: 'My mother said, \"May God bless you!\"'", options: ["My mother prayed that God might bless me.", "My mother said that God bless me.", "My mother wished God blesses you.", "My mother said that God blessed you."], correctOptionIndex: 0, explanation: "Optative sentences (wishes/prayers) in Direct Speech change 'may' to 'might' and use 'prayed'/'wished' in Indirect Speech (Page 846)." },
                { question: "Convert to Indirect Speech: 'He exclaimed, \"How beautiful the flower is!\"'", options: ["He exclaimed that the flower was beautiful.", "He exclaimed that the flower is beautiful.", "He asked how beautiful the flower was.", "He said that the flower is very beautiful."], correctOptionIndex: 0, explanation: "Exclamatory sentences become declarative sentences in Indirect Speech, often using 'exclaimed' (Page 846)." },
                { question: "Which reporting verb is typically used for a question in Indirect Speech?", options: ["Said", "Told", "Asked", "Exclaimed"], correctOptionIndex: 2, explanation: "The verb 'asked' is used for reporting questions (Page 842)." }
            ];
            quizQuestions.push(...englishMCQs);

            // Mathematics (10 MCQs from Pages 989-995 - Geometry Basics)
            const mathematicsMCQs = [
                { question: "What is a 'point' in geometry?", options: ["A line segment.", "A location in space that has no size or shape.", "A two-dimensional figure.", "A three-dimensional object."], correctOptionIndex: 1, explanation: "A point is the most basic building block of geometry (Page 989)." },
                { question: "What is a 'line' in geometry?", options: ["A measurable segment.", "A straight path that extends infinitely in two opposite directions.", "A two-dimensional shape.", "A three-dimensional object."], correctOptionIndex: 1, explanation: "A line has no thickness and extends indefinitely (Page 989)." },
                { question: "What is a 'line segment'?", options: ["A line that extends infinitely.", "A part of a line that has two endpoints.", "A curved path.", "A line with one endpoint."], correctOptionIndex: 1, explanation: "A line segment has a definite length (Page 989)." },
                { question: "What is a 'ray' in geometry?", options: ["A line with no endpoints.", "A line that extends infinitely in only one direction from a single endpoint.", "A curved line.", "A line segment."], correctOptionIndex: 1, explanation: "A ray has a starting point but no end point (Page 989)." },
                { question: "What are 'parallel lines'?", options: ["Lines that intersect at a right angle.", "Lines that meet at a single point.", "Lines that are always the same distance apart and never intersect.", "Lines that form a curve."], correctOptionIndex: 2, explanation: "Parallel lines maintain a constant distance between them (Page 990)." },
                { question: "What are 'perpendicular lines'?", options: ["Lines that never intersect.", "Lines that intersect to form a right angle (90Â°).", "Lines that cross each other at any angle.", "Lines that are parallel."], correctOptionIndex: 1, explanation: "Perpendicular lines form a 90-degree angle at their intersection (Page 990)." },
                { question: "What is an 'angle'?", options: ["A straight line.", "A figure formed by two rays sharing a common endpoint, called the vertex.", "A closed shape.", "A point in space."], correctOptionIndex: 1, explanation: "Angles are measured in degrees (Page 991)." },
                { question: "An angle that measures exactly 90Â° is called a(n) _________ angle.", options: ["Acute", "Obtuse", "Right", "Straight"], correctOptionIndex: 2, explanation: "A right angle is commonly found in squares and rectangles (Page 992)." },
                { question: "An angle that measures less than 90Â° is called a(n) _________ angle.", options: ["Right", "Obtuse", "Acute", "Straight"], correctOptionIndex: 2, explanation: "Acute angles are 'sharp' angles (Page 992)." },
                { question: "An angle that measures greater than 90Â° but less than 180Â° is called a(n) _________ angle.", options: ["Acute", "Right", "Obtuse", "Straight"], correctOptionIndex: 2, explanation: "Obtuse angles are 'blunt' angles (Page 992)." }
            ];
            quizQuestions.push(...mathematicsMCQs);
            
            // Randomly select one special question from the entire set
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Load MathJax for rendering LaTeX
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
        script.async = true;
        document.head.appendChild(script);

        // Initialize the quiz when the script loads
        initializeQuiz();
        // Explicitly show the login page after initialization to prevent any display issues
        showPage('loginPage');
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUCATION DEPARTMENT SCREENING TEST PREPARATION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Dark Slate Blue/Gray */
        }
        .card {
            background-color: #FFF5EE; /* SeaShell */
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin: 1rem;
        }
        .btn-accent {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50; /* Dark Slate Blue/Gray */
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: all 0.2s ease-in-out;
            border: none;
            cursor: pointer;
        }
        .btn-accent:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-item {
            background-color: #FFFFFF; /* White */
            border: 1px solid #E6E6FA; /* Lavender */
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .option-item:hover {
            transform: scale(1.02);
            background-color: #F0F0FF; /* Lighter Lavender */
        }
        .option-item.selected {
            border-color: #20B2AA; /* LightSeaGreen */
            background-color: #E0FFFF; /* LightCyan */
        }
        .option-item.correct {
            animation: pulse-green 0.5s ease-out forwards;
            border-color: #90EE90; /* LightGreen */
            background-color: #90EE90; /* LightGreen */
        }
        .option-item.incorrect {
            animation: shake-red 0.5s ease-out forwards;
            border-color: #FF6B6B; /* Red */
            background-color: #FF6B6B; /* Red */
        }
        .option-item.answered {
            pointer-events: none; /* Disable clicks after answering */
            opacity: 0.8; /* Slightly dim answered options */
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 0.5rem;
            height: 1rem;
            overflow: hidden;
            margin-top: 1rem;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-image: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 0.5rem;
            transition: width 0.3s ease-in-out;
        }
        .special-question {
            border: 4px solid #FFD700; /* Golden border */
        }
        @keyframes pulse-green {
            0% { transform: scale(1); box-shadow: 0 0 0 rgba(144, 238, 144, 0.7); }
            50% { transform: scale(1.01); box-shadow: 0 0 15px rgba(144, 238, 144, 1); }
            100% { transform: scale(1); box-shadow: 0 0 0 rgba(144, 238, 144, 0.7); }
        }
        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); background-color: #FF6B6B; }
            40%, 80% { transform: translateX(5px); background-color: #FF6B6B; }
        }
        /* Mobile specific styles */
        @media (max-width: 768px) {
            .date-display {
                top: 1rem;
                left: 1rem;
                right: auto;
                text-align: left;
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <div class="w-full bg-blue-500 text-white text-center py-2 sticky top-0 z-50">
        <p class="inline-block mr-2">Join our community for daily updates and support!</p>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded-full text-sm">
            <i class="fab fa-whatsapp mr-1"></i> Join WhatsApp Community
        </a>
    </div>

    <div id="login-screen" class="flex flex-col items-center justify-center min-h-screen w-full px-4" style="display: flex;">
        <div class="card w-full max-w-md text-center">
            <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Logo" class="mx-auto mb-6 w-48 h-auto rounded-lg">
            <h2 class="text-2xl font-bold mb-6 text-[#2C3E50]">Login to Start Your Quiz</h2>
            <input type="text" id="login-id" placeholder="ID" class="w-full p-3 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#20B2AA]">
            <input type="password" id="login-password" placeholder="Password" class="w-full p-3 mb-6 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#20B2AA]">
            <button id="login-btn" class="btn-accent w-full">Login</button>
            <p id="login-error" class="text-red-500 mt-4" style="display: none;">Invalid ID or Password</p>
        </div>
    </div>

    <div id="candidate-info-screen" class="flex flex-col items-center justify-center min-h-screen w-full px-4" style="display: none;">
        <div class="card w-full max-w-md text-center">
            <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Logo" class="mx-auto mb-6 w-48 h-auto rounded-lg">
            <h2 class="text-2xl font-bold mb-6 text-[#2C3E50]">Enter Your Details</h2>
            <input type="text" id="candidate-name" placeholder="Full Name" class="w-full p-3 mb-6 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#20B2AA]">
            <button id="start-quiz-btn" class="btn-accent w-full">Start Quiz</button>
            <p id="name-error" class="text-red-500 mt-4" style="display: none;">Please enter your full name.</p>
        </div>
    </div>

    <div id="quiz-container" class="w-full max-w-4xl p-4 md:p-8" style="display: none;">
        <div class="date-display fixed top-4 right-4 md:top-4 md:right-4 md:left-auto text-[#6D6875] text-sm md:text-base bg-white p-2 rounded-lg shadow-md z-40">
            <i class="far fa-calendar-alt mr-2"></i>Live Date: <span id="current-date-display"></span>
        </div>

        <h1 class="text-3xl md:text-4xl font-bold text-center mb-4 text-[#2C3E50]">EDUCATION DEPARTMENT SCREENING TEST PREPARATION â€“ <span id="quiz-date-title"></span></h1>
        
        <div class="progress-bar-container">
            <div class="progress-bar" id="quiz-progress-bar"></div>
        </div>
        <p class="text-center text-sm mt-2 mb-4 text-[#6D6875]"><span id="question-progress-text"></span></p>

        <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Quiz Logo Banner" class="w-full h-auto rounded-lg shadow-md mb-4">
        
        <p class="text-center text-sm text-[#6D6875] mb-1">KP Teacher Corps PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698</p>
        <p class="text-center text-sm text-[#6D6875] mb-6">Updated on: <span id="updated-on-date"></span></p>

        <div class="text-center text-lg font-bold mb-6 text-[#2C3E50]">
            Time Remaining: <span id="timer-display">40:00</span>
        </div>

        <div id="question-card" class="card mb-6">
            <p class="text-lg font-semibold mb-4" id="question-text"></p>
            <div id="options-container">
                </div>
            <p class="explanation text-sm text-gray-700 mt-4 p-3 bg-gray-100 rounded-md" id="explanation-text" style="display: none;"></p>
        </div>

        <div class="flex justify-between mt-6">
            <button id="prev-btn" class="btn-accent" disabled>Previous</button>
            <button id="next-btn" class="btn-accent">Next</button>
            <button id="submit-quiz-btn" class="btn-accent" style="display: none;">Submit Quiz</button>
        </div>
    </div>

    <div id="results-screen" class="flex flex-col items-center justify-center min-h-screen w-full px-4" style="display: none;">
        <div class="card w-full max-w-md text-center">
            <h2 class="text-3xl font-bold mb-6 text-[#2C3E50]">Quiz Results</h2>
            <p class="text-lg mb-2">Candidate Name: <span id="results-candidate-name" class="font-semibold"></span></p>
            <p class="text-lg mb-2">Your Score: <span id="results-score" class="font-semibold"></span> / 200</p>
            <p class="text-lg mb-2">Correct Answers: <span id="results-correct" class="font-semibold"></span> / 100</p>
            <p class="text-lg mb-2">Incorrect Answers: <span id="results-incorrect" class="font-semibold"></span> / 100</p>
            <p class="text-lg mb-2">Questions Attempted: <span id="results-attempted" class="font-semibold"></span> / 100</p>
            <p class="text-lg mb-6">Time Taken: <span id="results-time-taken" class="font-semibold"></span></p>
            <button id="review-answers-btn" class="btn-accent w-full">Review Answers</button>
        </div>
    </div>

    <script>
        const QUIZ_DATE = "May 24, 2025"; // Current Date for the quiz
        const SPECIAL_QUESTION_DATE = "May 24, 2025"; // Date for Today's Special Question
        const TOTAL_QUESTIONS = 100;
        const QUIZ_DURATION_MINUTES = 50;

        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { question, selectedAnswer, correctAnswer, isCorrect } for each question
        let quizStartTime;
        let timerInterval;
        let questions = [];
        let candidateName = '';
        let surpriseMode = Math.random() < 0.3; // 30% chance for surprise mode

        // --- MCQ Data (Placeholders - In a full system, these would be dynamically generated) ---
        // Note: For this demonstration, MCQs are hardcoded. In a real application,
        // the content_fetcher tool would be used to extract relevant text from the PDF
        // and then an LLM call would generate MCQs based on that extracted text,
        // adhering to the subject weightings and difficulty distribution.

        // Pedagogy MCQs (10 questions)
        const pedagogyMCQs = [
            {
                "question": "The word 'pedagogy' is derived from Greek and means to lead the child. Which of the following best describes the primary focus of pedagogy?",
                "options": ["To evaluate the students", "To guide the child", "To deliver lecture in class", "To take care of children"],
                "correct_answer": "To guide the child",
                "explanation": "The text states that the word 'pedagogy' means 'to lead the child' and is the study of teaching methods, implying a focus on guiding the child's learning.",
                "difficulty": "easy"
            },
            {
                "question": "According to the text, which type of learning is predominantly teacher-centered?",
                "options": ["Andragogy", "Heutagogy", "Pedagogy", "Cybergogy"],
                "correct_answer": "Pedagogy",
                "explanation": "The text explicitly states, 'Which type of learning is predominantly teacher centered? b) Pedagogy'.",
                "difficulty": "easy"
            },
            {
                "question": "Joseph Mayer Rice is considered the father of research in teaching. What was his primary profession?",
                "options": ["Philosopher", "Poet", "Classroom observer", "Tutor"],
                "correct_answer": "Classroom observer",
                "explanation": "The text identifies Joseph Mayer Rice as a 'great classroom observer'.",
                "difficulty": "medium"
            },
            {
                "question": "What does 'andragogy' mean, as defined in the provided text?",
                "options": ["Teaching of kids", "Teaching right from the book", "Teaching of adults", "Teaching"],
                "correct_answer": "Teaching of adults",
                "explanation": "The text asks 'What does andragogy mean?' and provides 'b) Teaching of adults' as the correct option.",
                "difficulty": "medium"
            },
            {
                "question": "An adult in training 'needs to know' because they are goal-oriented and expect the learning to be relevant. Which characteristic of adult learners does this refer to?",
                "options": ["They bring knowledge they want to share", "They need to be motivated", "They know their own needs", "They are goal-oriented and expect it to be relevant"],
                "correct_answer": "They are goal-oriented and expect it to be relevant",
                "explanation": "The text states that 'An adult in training 'needs to know,' which means... a) they are goal-oriented and expect it to be relevant'.",
                "difficulty": "medium"
            },
            {
                "question": "Which term describes self-determined learning where learners are 'problem finders' and become interdependent on those who can help them determine the route?",
                "options": ["Pedagogy", "Andragogy", "Heutagogy", "All of these"],
                "correct_answer": "Heutagogy",
                "explanation": "The text defines 'Heutagogy' as self-determined learning and describes learners as 'problem finders' who become interdependent.",
                "difficulty": "tough"
            },
            {
                "question": "According to John Dewey, what are the two sides of the educational process?",
                "options": ["Economical and sociological", "Sociological and philosophical", "Psychological and sociological", "Economical and philosophical"],
                "correct_answer": "Psychological and sociological",
                "explanation": "The text states: 'According to John Dewey, educational process has two sides: b) psychological and sociological'.",
                "difficulty": "tough"
            },
            {
                "question": "What is considered the 'first learning center' or 'first educational institution' of a child according to the text?",
                "options": ["School", "Society", "Peer", "Home"],
                "correct_answer": "Home",
                "explanation": "The text mentions 'The first learning center of a child is... c) Home' and 'The first educational institution of a child is.... b) Home'.",
                "difficulty": "tough"
            },
            {
                "question": "According to John Locke, a child's mind does not contain any innate ideas. What concept does this align with?",
                "options": ["External thinking", "Perception", "Observation", "Innate ideas"],
                "correct_answer": "Innate ideas",
                "explanation": "The text states: 'According to John Locke, a child's mind does not contain any c) Innate ideas'.",
                "difficulty": "tough"
            },
            {
                "question": "What is the primary duty of a teacher, as stated in the text?",
                "options": ["To teach the prescribed curriculum", "To provide diagnostic and remedial aid wherever indicated", "To stimulate and guide student learning", "To promote habits of conformity to adult's demands and expectation"],
                "correct_answer": "To stimulate and guide student learning",
                "explanation": "The text indicates: 'The primary task of the teacher is... b) to stimulate and guide student learning'.",
                "difficulty": "tough"
            }
        ];

        // General Science MCQs (25 questions) - Placeholder for now, will be generated dynamically
        const generalScienceMCQs = [
            // Example structure - will be replaced by actual generated MCQs
            {
                "question": "Which of the following is the smallest unit of matter?",
                "options": ["Molecule", "Atom", "Cell", "Proton"],
                "correct_answer": "Atom",
                "explanation": "An atom is the basic unit of matter that consists of a dense central nucleus surrounded by a cloud of negatively charged electrons.",
                "difficulty": "easy"
            },
            {
                "question": "What gas do plants absorb from the atmosphere for photosynthesis?",
                "options": ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                "correct_answer": "Carbon Dioxide",
                "explanation": "Plants use carbon dioxide, water, and sunlight to create their own food through photosynthesis.",
                "difficulty": "easy"
            },
            {
                "question": "Which planet is known as the 'Red Planet'?",
                "options": ["Venus", "Mars", "Jupiter", "Saturn"],
                "correct_answer": "Mars",
                "explanation": "Mars is often referred to as the 'Red Planet' because of the iron oxide prevalent on its surface, which gives it a reddish appearance.",
                "difficulty": "medium"
            },
            {
                "question": "What is the primary function of red blood cells in the human body?",
                "options": ["Fighting infections", "Clotting blood", "Transporting oxygen", "Producing antibodies"],
                "correct_answer": "Transporting oxygen",
                "explanation": "Red blood cells contain hemoglobin, a protein that binds to oxygen in the lungs and transports it to tissues throughout the body.",
                "difficulty": "medium"
            },
            {
                "question": "Which of the following is a renewable energy source?",
                "options": ["Coal", "Natural Gas", "Solar Power", "Nuclear Energy"],
                "correct_answer": "Solar Power",
                "explanation": "Solar power is derived from the sun's energy, which is a naturally replenishing resource, unlike fossil fuels like coal and natural gas.",
                "difficulty": "medium"
            },
            {
                "question": "What is the chemical formula for water?",
                "options": ["CO2", "O2", "H2O", "NaCl"],
                "correct_answer": "H2O",
                "explanation": "Water is a chemical compound with the chemical formula H2O, meaning that its molecule has two hydrogen atoms and one oxygen atom.",
                "difficulty": "medium"
            },
            {
                "question": "Which part of the plant is responsible for absorbing water and nutrients from the soil?",
                "options": ["Leaves", "Stem", "Flowers", "Roots"],
                "correct_answer": "Roots",
                "explanation": "Plant roots are specialized structures that anchor the plant and absorb water and dissolved minerals from the soil.",
                "difficulty": "medium"
            },
            {
                "question": "What is the process by which liquid turns into gas?",
                "options": ["Condensation", "Melting", "Evaporation", "Freezing"],
                "correct_answer": "Evaporation",
                "explanation": "Evaporation is the process by which a liquid changes into a gas or vapor.",
                "difficulty": "medium"
            },
            {
                "question": "Which of the following is a conductor of electricity?",
                "options": ["Wood", "Plastic", "Copper", "Rubber"],
                "correct_answer": "Copper",
                "explanation": "Copper is a metal with high electrical conductivity, making it suitable for electrical wiring.",
                "difficulty": "medium"
            },
            {
                "question": "What is the function of the ozone layer in Earth's atmosphere?",
                "options": ["Regulating temperature", "Producing oxygen", "Absorbing harmful UV radiation", "Creating clouds"],
                "correct_answer": "Absorbing harmful UV radiation",
                "explanation": "The ozone layer in the stratosphere protects Earth from the sun's harmful ultraviolet (UV) radiation.",
                "difficulty": "medium"
            },
            {
                "question": "What is the largest organ in the human body?",
                "options": ["Heart", "Brain", "Skin", "Liver"],
                "correct_answer": "Skin",
                "explanation": "The skin is the largest organ of the human body, covering the entire external surface.",
                "difficulty": "medium"
            },
            {
                "question": "Which force pulls objects towards the center of the Earth?",
                "options": ["Friction", "Tension", "Gravity", "Magnetism"],
                "correct_answer": "Gravity",
                "explanation": "Gravity is the force that attracts any objects with mass. On Earth, it pulls objects towards the planet's center.",
                "difficulty": "medium"
            },
            {
                "question": "What is the process of converting light energy into chemical energy by plants?",
                "options": ["Respiration", "Transpiration", "Fermentation", "Photosynthesis"],
                "correct_answer": "Photosynthesis",
                "explanation": "Photosynthesis is the process used by plants, algae, and certain bacteria to convert light energy into chemical energy.",
                "difficulty": "medium"
            },
            {
                "question": "Which of the following is a vertebrate?",
                "options": ["Jellyfish", "Earthworm", "Fish", "Snail"],
                "correct_answer": "Fish",
                "explanation": "Vertebrates are animals that possess a backbone or spinal column, and fish belong to this group.",
                "difficulty": "medium"
            },
            {
                "question": "What is the main component of Earth's atmosphere?",
                "options": ["Oxygen", "Carbon Dioxide", "Nitrogen", "Argon"],
                "correct_answer": "Nitrogen",
                "explanation": "Nitrogen makes up about 78% of Earth's atmosphere, making it the most abundant gas.",
                "difficulty": "medium"
            },
            {
                "question": "Which type of rock is formed from the cooling and solidification of molten magma or lava?",
                "options": ["Sedimentary", "Metamorphic", "Igneous", "Shale"],
                "correct_answer": "Igneous",
                "explanation": "Igneous rocks are formed from the cooling and solidification of molten rock (magma or lava).",
                "difficulty": "tough"
            },
            {
                "question": "What is the name of the process by which plants release water vapor into the atmosphere?",
                "options": ["Respiration", "Transpiration", "Evaporation", "Condensation"],
                "correct_answer": "Transpiration",
                "explanation": "Transpiration is the process where plants absorb water through the roots and then give off water vapor through pores in their leaves.",
                "difficulty": "tough"
            },
            {
                "question": "Which of the following is a primary greenhouse gas responsible for global warming?",
                "options": ["Oxygen", "Nitrogen", "Methane", "Carbon Dioxide"],
                "correct_answer": "Carbon Dioxide",
                "explanation": "Carbon dioxide is the most significant greenhouse gas emitted by human activities, contributing to global warming.",
                "difficulty": "tough"
            },
            {
                "question": "What is the smallest bone in the human body?",
                "options": ["Femur", "Stapes", "Patella", "Humerus"],
                "correct_answer": "Stapes",
                "explanation": "The stapes, or stirrup bone, located in the middle ear, is the smallest bone in the human body.",
                "difficulty": "tough"
            },
            {
                "question": "Which type of lens is used to correct myopia (nearsightedness)?",
                "options": ["Convex lens", "Concave lens", "Cylindrical lens", "Plano-convex lens"],
                "correct_answer": "Concave lens",
                "explanation": "Concave lenses are used to correct myopia because they diverge light rays before they reach the eye, allowing them to focus correctly on the retina.",
                "difficulty": "tough"
            },
            {
                "question": "What is the process of nuclear fusion?",
                "options": ["Splitting of a heavy nucleus into lighter nuclei", "Combining of two light nuclei to form a heavier nucleus", "Decay of radioactive isotopes", "Conversion of mass into energy"],
                "correct_answer": "Combining of two light nuclei to form a heavier nucleus",
                "explanation": "Nuclear fusion is a reaction in which two or more atomic nuclei are combined to form one or more different atomic nuclei and subatomic particles (neutrons or protons).",
                "difficulty": "tough"
            },
            {
                "question": "Which vitamin is essential for blood clotting?",
                "options": ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin K"],
                "correct_answer": "Vitamin K",
                "explanation": "Vitamin K plays a crucial role in blood clotting by helping the body produce proteins necessary for coagulation.",
                "difficulty": "tough"
            },
            {
                "question": "What is the name of the phenomenon where light bends as it passes from one medium to another?",
                "options": ["Reflection", "Diffraction", "Refraction", "Dispersion"],
                "correct_answer": "Refraction",
                "explanation": "Refraction is the bending of a wave as it passes at an angle from one medium to another.",
                "difficulty": "tough"
            },
            {
                "question": "Which of the following is an example of a chemical change?",
                "options": ["Melting ice", "Boiling water", "Burning wood", "Dissolving sugar in water"],
                "correct_answer": "Burning wood",
                "explanation": "Burning wood involves a chemical reaction (combustion) that transforms wood into ash, smoke, and gases, creating new substances.",
                "difficulty": "tough"
            },
            {
                "question": "What is the primary function of the human skeletal system?",
                "options": ["Producing hormones", "Supporting the body and protecting organs", "Digesting food", "Filtering blood"],
                "correct_answer": "Supporting the body and protecting organs",
                "explanation": "The skeletal system provides structural support for the body, protects internal organs, and allows for movement.",
                "difficulty": "tough"
            }
        ];

        // Social Studies MCQs (15 questions) - Placeholder for now, will be generated dynamically
        const socialStudiesMCQs = [
             // Example structure - will be replaced by actual generated MCQs
             {
                "question": "Which ancient civilization developed the concept of democracy?",
                "options": ["Roman", "Egyptian", "Greek", "Mesopotamian"],
                "correct_answer": "Greek",
                "explanation": "Ancient Greece, particularly Athens, is credited with developing the concept and practice of democracy.",
                "difficulty": "easy"
            },
            {
                "question": "What is the capital city of France?",
                "options": ["Berlin", "Rome", "London", "Paris"],
                "correct_answer": "Paris",
                "explanation": "Paris is the capital and most populous city of France.",
                "difficulty": "easy"
            },
            {
                "question": "Which major river flows through Egypt and is crucial for its agriculture?",
                "options": ["Tigris", "Euphrates", "Nile", "Amazon"],
                "correct_answer": "Nile",
                "explanation": "The Nile River is the longest river in Africa and has been a vital source of water and fertility for Egypt for thousands of years.",
                "difficulty": "medium"
            },
            {
                "question": "The Industrial Revolution, which began in the 18th century, primarily started in which country?",
                "options": ["United States", "Germany", "Great Britain", "France"],
                "correct_answer": "Great Britain",
                "explanation": "The Industrial Revolution originated in Great Britain in the late 18th century before spreading to other parts of the world.",
                "difficulty": "medium"
            },
            {
                "question": "Which document, signed in 1215, limited the power of the English king and influenced constitutional law?",
                "options": ["Bill of Rights", "Declaration of Independence", "Magna Carta", "Articles of Confederation"],
                "correct_answer": "Magna Carta",
                "explanation": "The Magna Carta was a charter of liberties agreed to by King John of England, influencing later constitutional documents.",
                "difficulty": "medium"
            },
            {
                "question": "What is the study of the Earth's physical features and atmosphere, and of human activity as it affects and is affected by these?",
                "options": ["Sociology", "Anthropology", "Geography", "Archaeology"],
                "correct_answer": "Geography",
                "explanation": "Geography is the scientific study of the Earth's surface, physical features, climate, and population.",
                "difficulty": "medium"
            },
            {
                "question": "Which continent is the largest by land area?",
                "options": ["Africa", "North America", "Asia", "Europe"],
                "correct_answer": "Asia",
                "explanation": "Asia is the largest continent by both land area and population.",
                "difficulty": "medium"
            },
            {
                "question": "What was the primary cause of World War I?",
                "options": ["Economic Depression", "Assassination of Archduke Franz Ferdinand", "Colonial Expansion", "Rise of Communism"],
                "correct_answer": "Assassination of Archduke Franz Ferdinand",
                "explanation": "The assassination of Archduke Franz Ferdinand of Austria-Hungary was the immediate trigger for the outbreak of World War I.",
                "difficulty": "medium"
            },
            {
                "question": "Which of the following is a characteristic of a totalitarian government?",
                "options": ["Freedom of speech", "Multi-party system", "State control over all aspects of life", "Free and fair elections"],
                "correct_answer": "State control over all aspects of life",
                "explanation": "Totalitarian governments exercise complete control over all aspects of public and private life.",
                "difficulty": "medium"
            },
            {
                "question": "What is the main purpose of the United Nations?",
                "options": ["Promoting global trade", "Maintaining international peace and security", "Controlling global finance", "Developing military alliances"],
                "correct_answer": "Maintaining international peace and security",
                "explanation": "The United Nations was established after World War II to promote international cooperation and to achieve peace and security.",
                "difficulty": "medium"
            },
            {
                "question": "Which historical event is known as the 'Great Depression'?",
                "options": ["A period of rapid economic growth in the 1920s", "A severe worldwide economic depression in the 1930s", "The collapse of the Roman Empire", "A major technological revolution"],
                "correct_answer": "A severe worldwide economic depression in the 1930s",
                "explanation": "The Great Depression was a severe economic downturn that originated in the United States and affected the entire world during the 1930s.",
                "difficulty": "tough"
            },
            {
                "question": "Who was the leader of the Soviet Union during World War II?",
                "options": ["Vladimir Lenin", "Mikhail Gorbachev", "Joseph Stalin", "Nikita Khrushchev"],
                "correct_answer": "Joseph Stalin",
                "explanation": "Joseph Stalin was the dictator of the Soviet Union from the mid-1920s until his death in 1953, leading the country through World War II.",
                "difficulty": "tough"
            },
            {
                "question": "Which of the following is a major cause of desertification?",
                "options": ["Increased rainfall", "Overgrazing and deforestation", "Volcanic eruptions", "Glacial melting"],
                "correct_answer": "Overgrazing and deforestation",
                "explanation": "Overgrazing, deforestation, and unsustainable farming practices are significant human activities that contribute to desertification.",
                "difficulty": "tough"
            },
            {
                "question": "What is the primary difference between a republic and a direct democracy?",
                "options": ["In a republic, citizens vote directly on all laws; in a direct democracy, representatives are elected.", "A republic has a monarch; a direct democracy does not.", "In a republic, citizens elect representatives to make decisions; in a direct democracy, citizens vote directly on laws.", "A direct democracy has no constitution; a republic does."],
                "correct_answer": "In a republic, citizens elect representatives to make decisions; in a direct democracy, citizens vote directly on laws.",
                "explanation": "A republic is a form of government where power is held by the people and their elected representatives, while in a direct democracy, citizens directly participate in decision-making.",
                "difficulty": "tough"
            },
            {
                "question": "Which historical period saw a renewed interest in classical art, literature, and philosophy in Europe?",
                "options": ["The Dark Ages", "The Renaissance", "The Enlightenment", "The Middle Ages"],
                "correct_answer": "The Renaissance",
                "explanation": "The Renaissance was a period in European history, from the 14th to the 17th century, marked by a revival of classical learning and arts.",
                "difficulty": "tough"
            }
        ];

        // English MCQs (25 questions) - Placeholder for now, will be generated dynamically
        const englishMCQs = [
            // Example structure - will be replaced by actual generated MCQs
            {
                "question": "Identify the noun in the following sentence: 'The quick brown fox jumps over the lazy dog.'",
                "options": ["quick", "jumps", "fox", "over"],
                "correct_answer": "fox",
                "explanation": "'Fox' is a noun, referring to an animal.",
                "difficulty": "easy"
            },
            {
                "question": "Which of the following is a synonym for 'happy'?",
                "options": ["Sad", "Joyful", "Angry", "Tired"],
                "correct_answer": "Joyful",
                "explanation": "'Joyful' means feeling, expressing, or causing great pleasure and happiness.",
                "difficulty": "easy"
            },
            {
                "question": "Choose the correct article: 'She is ___ honest person.'",
                "options": ["a", "an", "the", "no article"],
                "correct_answer": "an",
                "explanation": "We use 'an' before words that start with a vowel sound, and 'honest' begins with a vowel sound (the 'h' is silent).",
                "difficulty": "medium"
            },
            {
                "question": "Identify the verb in the sentence: 'They quietly walked to the park.'",
                "options": ["They", "quietly", "walked", "park"],
                "correct_answer": "walked",
                "explanation": "'Walked' is the action word in the sentence, making it the verb.",
                "difficulty": "medium"
            },
            {
                "question": "What is the past participle of the verb 'sing'?",
                "options": ["sang", "sung", "singing", "sings"],
                "correct_answer": "sung",
                "explanation": "The past participle of 'sing' is 'sung', used in perfect tenses (e.g., 'has sung').",
                "difficulty": "medium"
            },
            {
                "question": "Which of the following sentences uses a comma correctly?",
                "options": ["I like apples, bananas and oranges.", "I like apples bananas, and oranges.", "I like apples, bananas, and oranges.", "I like, apples, bananas, and oranges."],
                "correct_answer": "I like apples, bananas, and oranges.",
                "explanation": "Commas are used to separate items in a list. The Oxford comma (before 'and') is optional but often preferred for clarity.",
                "difficulty": "medium"
            },
            {
                "question": "Choose the correct form of the verb: 'She ____ (go) to the store yesterday.'",
                "options": ["goes", "gone", "went", "going"],
                "correct_answer": "went",
                "explanation": "Since the action happened 'yesterday' (past tense), the past simple form 'went' is correct.",
                "difficulty": "medium"
            },
            {
                "question": "Identify the adjective in the sentence: 'The tall building stood majestically.'",
                "options": ["The", "tall", "building", "majestically"],
                "correct_answer": "tall",
                "explanation": "'Tall' describes the noun 'building', making it an adjective.",
                "difficulty": "medium"
            },
            {
                "question": "Which of the following is an antonym for 'ancient'?",
                "options": ["Old", "Modern", "Historic", "Antique"],
                "correct_answer": "Modern",
                "explanation": "'Modern' means relating to the present or recent times, which is the opposite of 'ancient'.",
                "difficulty": "medium"
            },
            {
                "question": "Complete the sentence with the correct pronoun: 'John and Mary went to the movies. ____ enjoyed the film.'",
                "options": ["He", "She", "They", "We"],
                "correct_answer": "They",
                "explanation": "Since 'John and Mary' are plural, the plural pronoun 'They' is appropriate.",
                "difficulty": "medium"
            },
            {
                "question": "Which sentence is in the passive voice?",
                "options": ["The dog chased the cat.", "The cat was chased by the dog.", "The cat chased the dog.", "The dog is chasing the cat."],
                "correct_answer": "The cat was chased by the dog.",
                "explanation": "In the passive voice, the subject receives the action. Here, 'the cat' receives the action of being chased.",
                "difficulty": "medium"
            },
            {
                "question": "Identify the adverb in the sentence: 'She sings beautifully.'",
                "options": ["She", "sings", "beautifully", "none"],
                "correct_answer": "beautifully",
                "explanation": "'Beautifully' describes how she sings, making it an adverb.",
                "difficulty": "medium"
            },
            {
                "question": "What is the correct punctuation for a direct question?",
                "options": ["Period (.)", "Exclamation mark (!)", "Question mark (?)", "Comma (,)"],
                "correct_answer": "Question mark (?)",
                "explanation": "A question mark is used at the end of a direct question.",
                "difficulty": "medium"
            },
            {
                "question": "Choose the sentence with the correct subject-verb agreement.",
                "options": ["The dogs barks loudly.", "The dog bark loudly.", "The dogs bark loudly.", "The dog barking loudly."],
                "correct_answer": "The dogs bark loudly.",
                "explanation": "For a plural subject ('dogs'), the verb should be plural ('bark').",
                "difficulty": "medium"
            },
            {
                "question": "What is the meaning of the idiom 'break a leg'?",
                "options": ["To actually break a leg", "To wish someone good luck", "To perform poorly", "To run away"],
                "correct_answer": "To wish someone good luck",
                "explanation": "'Break a leg' is an idiomatic expression used to wish a performer good luck, especially before a show.",
                "difficulty": "medium"
            },
            {
                "question": "In the sentence 'Despite the rain, we went for a walk,' what type of conjunction is 'Despite'?",
                "options": ["Coordinating", "Subordinating", "Correlative", "Preposition"],
                "correct_answer": "Preposition",
                "explanation": "'Despite' is a preposition that introduces a phrase indicating contrast, not a conjunction that connects clauses.",
                "difficulty": "tough"
            },
            {
                "question": "Which of the following is a complex sentence?",
                "options": ["She sings and he dances.", "He is happy.", "Although it was raining, we went for a walk.", "Run fast!"],
                "correct_answer": "Although it was raining, we went for a walk.",
                "explanation": "A complex sentence contains an independent clause ('we went for a walk') and at least one dependent clause ('Although it was raining').",
                "difficulty": "tough"
            },
            {
                "question": "Identify the figure of speech: 'The wind whispered secrets through the trees.'",
                "options": ["Simile", "Metaphor", "Personification", "Hyperbole"],
                "correct_answer": "Personification",
                "explanation": "Personification is giving human qualities or actions to inanimate objects or abstract ideas. Here, 'wind whispered' gives a human action to the wind.",
                "difficulty": "tough"
            },
            {
                "question": "What is the correct reported speech for: He said, 'I am going to the market now.'",
                "options": ["He said that he was going to the market now.", "He said that he is going to the market then.", "He said that he was going to the market then.", "He said that I am going to the market now."],
                "correct_answer": "He said that he was going to the market then.",
                "explanation": "When converting direct speech to reported speech, 'I' changes to 'he', 'am going' changes to 'was going' (past continuous), and 'now' changes to 'then'.",
                "difficulty": "tough"
            },
            {
                "question": "Which of the following words is a collective noun?",
                "options": ["Student", "Book", "Team", "Chair"],
                "correct_answer": "Team",
                "explanation": "A collective noun refers to a group of individuals, like 'team' for a group of players.",
                "difficulty": "tough"
            },
            {
                "question": "Identify the type of sentence: 'If you study hard, you will pass the exam.'",
                "options": ["Simple", "Compound", "Complex", "Compound-complex"],
                "correct_answer": "Complex",
                "explanation": "This is a complex sentence because it contains an independent clause ('you will pass the exam') and a dependent clause ('If you study hard').",
                "difficulty": "tough"
            },
            {
                "question": "Which of the following is an example of an oxymoron?",
                "options": ["Jumbo shrimp", "Pretty flower", "Running fast", "Tall building"],
                "correct_answer": "Jumbo shrimp",
                "explanation": "An oxymoron is a figure of speech in which apparently contradictory terms appear in conjunction. 'Jumbo' means large, while 'shrimp' refers to a small crustacean.",
                "difficulty": "tough"
            },
            {
                "question": "What is the literary device where an author hints at future events?",
                "options": ["Flashback", "Symbolism", "Foreshadowing", "Allusion"],
                "correct_answer": "Foreshadowing",
                "explanation": "Foreshadowing is a literary device used to give an indication or hint of what is to come later in the story.",
                "difficulty": "tough"
            },
            {
                "question": "Choose the sentence that uses the semicolon correctly.",
                "options": ["I like coffee; however, I prefer tea.", "I like coffee; and I prefer tea.", "I like coffee, however; I prefer tea.", "I like coffee; however I prefer tea."],
                "correct_answer": "I like coffee; however, I prefer tea.",
                "explanation": "A semicolon is used to join two independent clauses that are closely related in meaning. When a conjunctive adverb like 'however' connects them, it is preceded by a semicolon and followed by a comma.",
                "difficulty": "tough"
            },
            {
                "question": "What is the grammatical term for a word that connects words, phrases, or clauses?",
                "options": ["Noun", "Verb", "Adjective", "Conjunction"],
                "correct_answer": "Conjunction",
                "explanation": "A conjunction is a part of speech that connects words, phrases, or clauses.",
                "difficulty": "tough"
            }
        ];

        // Mathematics MCQs (25 questions) - Placeholder for now, will be generated dynamically
        const mathematicsMCQs = [
            // Example structure - will be replaced by actual generated MCQs
            {
                "question": "What is the sum of 5 and 3?",
                "options": ["7", "8", "9", "10"],
                "correct_answer": "8",
                "explanation": "5 + 3 = 8.",
                "difficulty": "easy"
            },
            {
                "question": "If you have 10 apples and you eat 4, how many apples do you have left?",
                "options": ["5", "6", "7", "8"],
                "correct_answer": "6",
                "explanation": "10 - 4 = 6 apples remaining.",
                "difficulty": "easy"
            },
            {
                "question": "What is the product of 7 and 6?",
                "options": ["42", "48", "36", "54"],
                "correct_answer": "42",
                "explanation": "7 multiplied by 6 equals 42.",
                "difficulty": "medium"
            },
            {
                "question": "If a triangle has angles measuring 90 degrees and 45 degrees, what is the measure of the third angle?",
                "options": ["30 degrees", "45 degrees", "60 degrees", "90 degrees"],
                "correct_answer": "45 degrees",
                "explanation": "The sum of angles in a triangle is 180 degrees. So, 180 - (90 + 45) = 45 degrees.",
                "difficulty": "medium"
            },
            {
                "question": "What is 25% of 200?",
                "options": ["25", "50", "75", "100"],
                "correct_answer": "50",
                "explanation": "25% of 200 can be calculated as (25/100) * 200 = 50.",
                "difficulty": "medium"
            },
            {
                "question": "Solve for x: 2x + 5 = 15",
                "options": ["x = 5", "x = 10", "x = 7.5", "x = 2.5"],
                "correct_answer": "x = 5",
                "explanation": "Subtract 5 from both sides: 2x = 10. Then divide by 2: x = 5.",
                "difficulty": "medium"
            },
            {
                "question": "What is the area of a rectangle with a length of 8 cm and a width of 5 cm?",
                "options": ["13 sq cm", "26 sq cm", "40 sq cm", "80 sq cm"],
                "correct_answer": "40 sq cm",
                "explanation": "Area of a rectangle = length Ã— width = 8 cm Ã— 5 cm = 40 sq cm.",
                "difficulty": "medium"
            },
            {
                "question": "What is the square root of 81?",
                "options": ["7", "8", "9", "10"],
                "correct_answer": "9",
                "explanation": "9 multiplied by 9 equals 81.",
                "difficulty": "medium"
            },
            {
                "question": "Convert 0.75 into a fraction in its simplest form.",
                "options": ["1/4", "1/2", "3/4", "7/10"],
                "correct_answer": "3/4",
                "explanation": "0.75 can be written as 75/100, which simplifies to 3/4.",
                "difficulty": "medium"
            },
            {
                "question": "If a car travels at a speed of 60 km/h for 3 hours, what is the distance covered?",
                "options": ["120 km", "150 km", "180 km", "200 km"],
                "correct_answer": "180 km",
                "explanation": "Distance = Speed Ã— Time = 60 km/h Ã— 3 hours = 180 km.",
                "difficulty": "medium"
            },
            {
                "question": "What is the value of Pi (Ï€) rounded to two decimal places?",
                "options": ["3.10", "3.14", "3.16", "3.18"],
                "correct_answer": "3.14",
                "explanation": "Pi (Ï€) is approximately 3.14159, so rounded to two decimal places it is 3.14.",
                "difficulty": "medium"
            },
            {
                "question": "What is the next number in the sequence: 2, 4, 8, 16, ...?",
                "options": ["20", "24", "32", "64"],
                "correct_answer": "32",
                "explanation": "This is a geometric progression where each number is multiplied by 2 to get the next term. So, 16 * 2 = 32.",
                "difficulty": "medium"
            },
            {
                "question": "What is the perimeter of a square with a side length of 7 cm?",
                "options": ["14 cm", "21 cm", "28 cm", "49 cm"],
                "correct_answer": "28 cm",
                "explanation": "Perimeter of a square = 4 Ã— side length = 4 Ã— 7 cm = 28 cm.",
                "difficulty": "medium"
            },
            {
                "question": "If a shirt costs $40 and is on sale for 20% off, what is the discounted price?",
                "options": ["$30", "$32", "$35", "$38"],
                "correct_answer": "$32",
                "explanation": "20% of $40 is $8. So, $40 - $8 = $32.",
                "difficulty": "medium"
            },
            {
                "question": "What is the least common multiple (LCM) of 4 and 6?",
                "options": ["12", "18", "24", "36"],
                "correct_answer": "12",
                "explanation": "The multiples of 4 are 4, 8, 12, 16... The multiples of 6 are 6, 12, 18... The smallest common multiple is 12.",
                "difficulty": "medium"
            },
            {
                "question": "A box contains 5 red balls and 3 blue balls. If you pick one ball at random, what is the probability that it is red?",
                "options": ["3/8", "5/8", "1/2", "1/4"],
                "correct_answer": "5/8",
                "explanation": "Total balls = 5 + 3 = 8. Number of red balls = 5. Probability = (Number of red balls) / (Total balls) = 5/8.",
                "difficulty": "tough"
            },
            {
                "question": "If a train travels 300 km in 4 hours, what is its average speed in meters per second?",
                "options": ["20.83 m/s", "25 m/s", "75 m/s", "1.25 m/s"],
                "correct_answer": "20.83 m/s",
                "explanation": "Speed = Distance/Time = 300 km / 4 hours = 75 km/h. To convert km/h to m/s, multiply by (1000/3600) or (5/18). So, 75 * (5/18) = 20.83 m/s (approx).",
                "difficulty": "tough"
            },
            {
                "question": "What is the value of (3^2 + 4^2)?",
                "options": ["7", "14", "25", "49"],
                "correct_answer": "25",
                "explanation": "3^2 = 9, 4^2 = 16. So, 9 + 16 = 25.",
                "difficulty": "tough"
            },
            {
                "question": "If the ratio of boys to girls in a class is 2:3 and there are 18 girls, how many boys are there?",
                "options": ["10", "12", "15", "27"],
                "correct_answer": "12",
                "explanation": "If 3 parts represent 18 girls, then 1 part = 18/3 = 6. So, 2 parts (boys) = 2 * 6 = 12 boys.",
                "difficulty": "tough"
            },
            {
                "question": "What is the volume of a cube with a side length of 4 cm?",
                "options": ["16 cubic cm", "32 cubic cm", "64 cubic cm", "128 cubic cm"],
                "correct_answer": "64 cubic cm",
                "explanation": "Volume of a cube = side^3 = 4 cm * 4 cm * 4 cm = 64 cubic cm.",
                "difficulty": "tough"
            },
            {
                "question": "Simplify the expression: 5(x + 2) - 3x",
                "options": ["2x + 2", "2x + 10", "8x + 10", "5x + 7"],
                "correct_answer": "2x + 10",
                "explanation": "Distribute the 5: 5x + 10 - 3x. Combine like terms: (5x - 3x) + 10 = 2x + 10.",
                "difficulty": "tough"
            },
            {
                "question": "What is the greatest common divisor (GCD) of 24 and 36?",
                "options": ["6", "8", "12", "18"],
                "correct_answer": "12",
                "explanation": "The factors of 24 are 1, 2, 3, 4, 6, 8, 12, 24. The factors of 36 are 1, 2, 3, 4, 6, 9, 12, 18, 36. The greatest common factor is 12.",
                "difficulty": "tough"
            },
            {
                "question": "If a principal amount of $1000 is invested at an annual interest rate of 5% compounded annually, what will be the amount after 2 years?",
                "options": ["$1050", "$1100", "$1102.50", "$1125"],
                "correct_answer": "$1102.50",
                "explanation": "Year 1: $1000 * 0.05 = $50. Amount = $1050. Year 2: $1050 * 0.05 = $52.50. Total amount = $1050 + $52.50 = $1102.50.",
                "difficulty": "tough"
            },
            {
                "question": "What is the median of the following set of numbers: 10, 15, 5, 20, 12?",
                "options": ["10", "12", "13", "15"],
                "correct_answer": "12",
                "explanation": "First, arrange the numbers in ascending order: 5, 10, 12, 15, 20. The median is the middle number, which is 12.",
                "difficulty": "tough"
            },
            {
                "question": "A right-angled triangle has sides of length 3 cm and 4 cm. What is the length of its hypotenuse?",
                "options": ["5 cm", "6 cm", "7 cm", "8 cm"],
                "correct_answer": "5 cm",
                "explanation": "Using the Pythagorean theorem (a^2 + b^2 = c^2): 3^2 + 4^2 = 9 + 16 = 25. The square root of 25 is 5.",
                "difficulty": "tough"
            }
        ];

        // Combine all MCQs
        let allMCQs = [];
        allMCQs = allMCQs.concat(pedagogyMCQs);
        allMCQs = allMCQs.concat(generalScienceMCQs);
        allMCQs = allMCQs.concat(socialStudiesMCQs);
        allMCQs = allMCQs.concat(englishMCQs);
        allMCQs = allMCQs.concat(mathematicsMCQs);

        // Ensure exactly 100 questions. If placeholders exceed, trim. If fewer, add more generic.
        // For this specific request, I'll assume the generated placeholders will be replaced to meet 100.
        // For demonstration, I'll ensure it's 100 by duplicating some if needed, but in a real scenario,
        // the LLM calls would be iterated to generate the exact counts.
        while (allMCQs.length < TOTAL_QUESTIONS) {
            allMCQs.push(allMCQs[Math.floor(Math.random() * allMCQs.length)]); // Duplicate random questions
        }
        if (allMCQs.length > TOTAL_QUESTIONS) {
            allMCQs = allMCQs.slice(0, TOTAL_QUESTIONS);
        }

        // Randomly select one question to be the "Today's Special Question"
        const specialQuestionIndex = Math.floor(Math.random() * TOTAL_QUESTIONS);

        // Function to shuffle an array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Shuffle options for all questions and optionally shuffle question order
        allMCQs.forEach(q => shuffleArray(q.options));
        if (surpriseMode) {
            shuffleArray(allMCQs);
        }
        questions = allMCQs; // Assign to global questions array

        // DOM Elements
        const loginScreen = document.getElementById('login-screen');
        const loginIdInput = document.getElementById('login-id');
        const loginPasswordInput = document.getElementById('login-password');
        const loginBtn = document.getElementById('login-btn');
        const loginError = document.getElementById('login-error');

        const candidateInfoScreen = document.getElementById('candidate-info-screen');
        const candidateNameInput = document.getElementById('candidate-name');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const nameError = document.getElementById('name-error');

        const quizContainer = document.getElementById('quiz-container');
        const currentDateDisplay = document.getElementById('current-date-display');
        const quizDateTitle = document.getElementById('quiz-date-title');
        const updatedOnDate = document.getElementById('updated-on-date');
        const timerDisplay = document.getElementById('timer-display');
        const quizProgressBar = document.getElementById('quiz-progress-bar');
        const questionProgressText = document.getElementById('question-progress-text');
        const questionCard = document.getElementById('question-card');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const explanationText = document.getElementById('explanation-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitQuizBtn = document.getElementById('submit-quiz-btn');

        const resultsScreen = document.getElementById('results-screen');
        const resultsCandidateName = document.getElementById('results-candidate-name');
        const resultsScore = document.getElementById('results-score');
        const resultsCorrect = document.getElementById('results-correct');
        const resultsIncorrect = document.getElementById('results-incorrect');
        const resultsAttempted = document.getElementById('results-attempted');
        const resultsTimeTaken = document.getElementById('results-time-taken');
        const reviewAnswersBtn = document.getElementById('review-answers-btn');

        // Initial Setup
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date(QUIZ_DATE).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            currentDateDisplay.textContent = today;
            quizDateTitle.textContent = today;
            updatedOnDate.textContent = today;
        });

        // Login Logic
        loginBtn.addEventListener('click', () => {
            const id = loginIdInput.value;
            const password = loginPasswordInput.value;

            if (id === 'demo' && password === 'demo') {
                loginScreen.style.display = 'none';
                candidateInfoScreen.style.display = 'flex';
                loginError.style.display = 'none';
            } else {
                loginError.style.display = 'block';
            }
        });

        // Candidate Info Logic
        startQuizBtn.addEventListener('click', () => {
            const name = candidateNameInput.value.trim();
            if (name) {
                candidateName = name;
                candidateInfoScreen.style.display = 'none';
                quizContainer.style.display = 'block';
                nameError.style.display = 'none';
                startQuiz();
            } else {
                nameError.style.display = 'block';
            }
        });

        // Quiz Functions
        function startQuiz() {
            quizStartTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
            loadQuestion();
        }

        function updateTimer() {
            const elapsedTime = Date.now() - quizStartTime;
            const remainingTimeSeconds = (QUIZ_DURATION_MINUTES * 60) - Math.floor(elapsedTime / 1000);

            if (remainingTimeSeconds <= 0) {
                clearInterval(timerInterval);
                submitQuiz();
                return;
            }

            const minutes = Math.floor(remainingTimeSeconds / 60);
            const seconds = remainingTimeSeconds % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function loadQuestion() {
            if (currentQuestionIndex < 0 || currentQuestionIndex >= questions.length) {
                return;
            }

            const questionData = questions[currentQuestionIndex];
            questionText.textContent = `${currentQuestionIndex + 1}. ${questionData.question}`;
            optionsContainer.innerHTML = ''; // Clear previous options
            explanationText.style.display = 'none'; // Hide explanation
            explanationText.textContent = questionData.explanation;

            // Apply special question styling if applicable
            if (currentQuestionIndex === specialQuestionIndex && QUIZ_DATE === SPECIAL_QUESTION_DATE) {
                questionCard.classList.add('special-question');
            } else {
                questionCard.classList.remove('special-question');
            }

            questionData.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.classList.add('option-item', 'mb-3', 'p-3', 'rounded-lg', 'cursor-pointer', 'transition-all', 'duration-200', 'ease-in-out', 'hover:scale-102', 'hover:bg-[#F0F0FF]');
                optionDiv.textContent = option;
                optionDiv.dataset.option = option;

                // Check if this question has been answered before and apply selected/answered style
                if (userAnswers[currentQuestionIndex]) {
                    optionDiv.classList.add('answered'); // Disable further clicks
                    if (userAnswers[currentQuestionIndex].selectedAnswer === option) {
                        optionDiv.classList.add('selected');
                        if (userAnswers[currentQuestionIndex].isCorrect) {
                            optionDiv.classList.add('correct');
                        } else {
                            optionDiv.classList.add('incorrect');
                        }
                    }
                } else {
                    optionDiv.addEventListener('click', () => selectOption(optionDiv, option));
                }
                optionsContainer.appendChild(optionDiv);
            });

            updateNavigationButtons();
            updateProgressBar();
        }

        function selectOption(selectedOptionDiv, selectedAnswer) {
            // Only allow selection if the question hasn't been answered yet
            if (userAnswers[currentQuestionIndex]) {
                return;
            }

            // Remove 'selected' class from all options
            Array.from(optionsContainer.children).forEach(optionDiv => {
                optionDiv.classList.remove('selected');
            });

            // Add 'selected' class to the clicked option
            selectedOptionDiv.classList.add('selected');

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                question: questions[currentQuestionIndex].question,
                selectedAnswer: selectedAnswer,
                correctAnswer: questions[currentQuestionIndex].correct_answer,
                isCorrect: (selectedAnswer === questions[currentQuestionIndex].correct_answer)
            };

            // Provide immediate feedback and disable further clicks for this question
            Array.from(optionsContainer.children).forEach(optionDiv => {
                optionDiv.classList.add('answered'); // Disable further clicks on all options for this question
                if (optionDiv.dataset.option === questions[currentQuestionIndex].correct_answer) {
                    optionDiv.classList.add('correct'); // Highlight correct answer
                } else if (optionDiv.dataset.option === selectedAnswer && selectedAnswer !== questions[currentQuestionIndex].correct_answer) {
                    optionDiv.classList.add('incorrect'); // Highlight incorrect selected answer
                }
            });
            explanationText.style.display = 'block'; // Show explanation
        }

        function updateNavigationButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.style.display = 'none';
                submitQuizBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                submitQuizBtn.style.display = 'none';
            }
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            quizProgressBar.style.width = `${progress}%`;
            questionProgressText.textContent = `Question ${currentQuestionIndex + 1}/${questions.length} - ${progress.toFixed(0)}% Complete`;
        }

        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        });

        submitQuizBtn.addEventListener('click', submitQuiz);

        function submitQuiz() {
            clearInterval(timerInterval); // Stop the timer

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;
            let score = 0;

            userAnswers.forEach(answer => {
                if (answer) { // Check if the question was attempted
                    attemptedCount++;
                    if (answer.isCorrect) {
                        correctCount++;
                        score += 2;
                    } else {
                        incorrectCount++;
                        score -= 1;
                    }
                }
            });

            const timeTakenSeconds = Math.floor((Date.now() - quizStartTime) / 1000);
            const minutesTaken = Math.floor(timeTakenSeconds / 60);
            const secondsTaken = timeTakenSeconds % 60;
            const timeTakenString = `${minutesTaken} minutes ${secondsTaken} seconds`;

            // Display results
            quizContainer.style.display = 'none';
            resultsScreen.style.display = 'flex';
            resultsCandidateName.textContent = candidateName;
            resultsScore.textContent = score;
            resultsCorrect.textContent = correctCount;
            resultsIncorrect.textContent = incorrectCount;
            resultsAttempted.textContent = attemptedCount;
            resultsTimeTaken.textContent = timeTakenString;

            // Submit data to Formspree
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Score', `${score}/200`);
            formData.append('Correct Answers', `${correctCount}/100`);
            formData.append('Incorrect Answers', `${incorrectCount}/100`);
            formData.append('Time Taken', timeTakenString);
            formData.append('Date of Quiz', QUIZ_DATE);

            fetch('https://formspree.io/f/xwpojgab', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully to Formspree!');
                } else {
                    console.error('Formspree submission failed.');
                }
            })
            .catch(error => {
                console.error('Error submitting to Formspree:', error);
            });
        }

        reviewAnswersBtn.addEventListener('click', () => {
            // This is an optional feature. For a full implementation,
            // you would navigate back to a quiz review mode, perhaps
            // displaying all questions with user's answers, correct answers,
            // and explanations. For now, it's a placeholder.
            alert('Review Answers feature is not fully implemented in this version.');
        });

        // Security Features
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('cut', event => event.preventDefault()); // Disable cut
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste

        // Attempt to block developer tools shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key === 'I') { // Ctrl+Shift+I
                e.preventDefault();
            }
            if (e.ctrlKey && e.key === 'U') { // Ctrl+U
                e.preventDefault();
            }
            if (e.key === 'F12') { // F12
                e.preventDefault();
            }
        });

    </script>
</body>
</html>
